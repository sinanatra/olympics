const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/RecordRTC.Bv7qv1Kq.js","../chunks/_commonjsHelpers.Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{s as F,e as $,t as C,a as E,c as R,b as y,d as B,f as v,g as T,i as M,h as _,p as D,n as I,r as J,x as Q,m as O,k as W,o as X,l as Y}from"../chunks/scheduler.Xi5sktIg.js";import{S as G,i as H,c as N,a as U,m as q,t as w,b as Z,d as A,e as P,g as x}from"../chunks/index.DXItMEGr.js";import{b as tt}from"../chunks/paths.ei0ocZ3p.js";import{c as et,b as ot,d as z,w as nt,h as at}from"../chunks/stores.DfVWKANe.js";import{t as rt,S as st}from"../chunks/dsv.B03kyFAP.js";import{C as lt}from"../chunks/ControlPanel.BGZ3nm8y.js";import{_ as it}from"../chunks/preload-helper.C1FmrZbK.js";import{c as ct}from"../chunks/constants.BfKEPlZp.js";function dt(i){let t,e,o,n,r,s,g,f,c,m,k,d,l,a,u,b,S;return{c(){t=$("div"),e=$("button"),o=C("Start Manual Recording"),r=E(),s=$("button"),g=C("Stop Manual Recording"),c=E(),m=$("button"),k=C("Start Auto-Recording"),d=E(),l=$("button"),a=C("Stop Auto-Recording"),this.h()},l(h){t=R(h,"DIV",{});var p=y(t);e=R(p,"BUTTON",{});var V=y(e);o=B(V,"Start Manual Recording"),V.forEach(v),r=T(p),s=R(p,"BUTTON",{});var L=y(s);g=B(L,"Stop Manual Recording"),L.forEach(v),c=T(p),m=R(p,"BUTTON",{});var j=y(m);k=B(j,"Start Auto-Recording"),j.forEach(v),d=T(p),l=R(p,"BUTTON",{});var K=y(l);a=B(K,"Stop Auto-Recording"),K.forEach(v),p.forEach(v),this.h()},h(){e.disabled=n=i[0]||i[1],s.disabled=f=!i[0]||i[1],m.disabled=i[1],l.disabled=u=!i[1]},m(h,p){M(h,t,p),_(t,e),_(e,o),_(t,r),_(t,s),_(s,g),_(t,c),_(t,m),_(m,k),_(t,d),_(t,l),_(l,a),b||(S=[D(e,"click",i[2]),D(s,"click",i[3]),D(m,"click",i[4]),D(l,"click",i[5])],b=!0)},p(h,[p]){p&3&&n!==(n=h[0]||h[1])&&(e.disabled=n),p&3&&f!==(f=!h[0]||h[1])&&(s.disabled=f),p&2&&(m.disabled=h[1]),p&2&&u!==(u=!h[1])&&(l.disabled=u)},i:I,o:I,d(h){h&&v(t),b=!1,J(S)}}}const ut=6e4;function ft(i,t,e){let o,n=!1,r=!1,s=0,g;async function f(){const d=Q(ot);if(d){const{default:l}=await it(async()=>{const{default:u}=await import("../chunks/RecordRTC.Bv7qv1Kq.js").then(b=>b.R);return{default:u}},__vite__mapDeps([0,1]),import.meta.url),a=d.captureStream(30);o=new l(a,{type:"video",mimeType:"video/webm",videoBitsPerSecond:5e6}),o.startRecording(),e(0,n=!0),console.log("Recording started")}else console.error("Canvas not found")}async function c(){o&&n?(o.stopRecording(()=>{const d=o.getBlob(),l=document.createElement("a");l.href=URL.createObjectURL(d),l.download="canvas_recording.webm",l.click(),console.log("Recording stopped and saved")}),e(0,n=!1)):console.error("No active recording")}function m(){if(r)return;e(1,r=!0);const d=Object.keys(ct).filter(l=>l!=="name");console.log("Auto-recording started"),g=setInterval(async()=>{if(s>=d.length){console.log("All steps completed. Stopping auto-recording."),k();return}const l=d[s];et.update(a=>({...a,clusterBy:l})),console.log(`Updated clusterBy to: ${l}`),n||await f(),s++},ut)}async function k(){r&&(clearInterval(g),e(1,r=!1),s=0,await c(),console.log("Auto-recording stopped"))}return[n,r,f,c,m,k]}class mt extends G{constructor(t){super(),H(this,t,ft,dt,F,{})}}function pt(i){let t,e="Loading...";return{c(){t=$("p"),t.textContent=e,this.h()},l(o){t=R(o,"P",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-qdsr2u"&&(t.textContent=e),this.h()},h(){O(t,"class","svelte-13tgnqv")},m(o,n){M(o,t,n)},i:I,o:I,d(o){o&&v(t)}}}function _t(i){let t,e,o;return e=new st({}),{c(){t=$("div"),N(e.$$.fragment),this.h()},l(n){t=R(n,"DIV",{class:!0});var r=y(t);U(e.$$.fragment,r),r.forEach(v),this.h()},h(){O(t,"class","svelte-13tgnqv")},m(n,r){M(n,t,r),q(e,t,null),o=!0},i(n){o||(A(e.$$.fragment,n),o=!0)},o(n){w(e.$$.fragment,n),o=!1},d(n){n&&v(t),P(e)}}}function gt(i){let t,e,o,n,r,s,g,f,c,m;const k=[_t,pt],d=[];function l(a,u){return a[0].length>0?0:1}return e=l(i),o=d[e]=k[e](i),s=new mt({}),c=new lt({}),{c(){t=$("main"),o.c(),n=E(),r=$("div"),N(s.$$.fragment),g=E(),f=$("div"),N(c.$$.fragment),this.h()},l(a){t=R(a,"MAIN",{});var u=y(t);o.l(u),n=T(u),r=R(u,"DIV",{class:!0});var b=y(r);U(s.$$.fragment,b),b.forEach(v),g=T(u),f=R(u,"DIV",{class:!0});var S=y(f);U(c.$$.fragment,S),S.forEach(v),u.forEach(v),this.h()},h(){O(r,"class","svelte-13tgnqv"),O(f,"class","svelte-13tgnqv")},m(a,u){M(a,t,u),d[e].m(t,null),_(t,n),_(t,r),q(s,r,null),_(t,g),_(t,f),q(c,f,null),m=!0},p(a,[u]){let b=e;e=l(a),e!==b&&(x(),w(d[b],1,1,()=>{d[b]=null}),Z(),o=d[e],o||(o=d[e]=k[e](a),o.c()),A(o,1),o.m(t,n))},i(a){m||(A(o),A(s.$$.fragment,a),A(c.$$.fragment,a),m=!0)},o(a){w(o),w(s.$$.fragment,a),w(c.$$.fragment,a),m=!1},d(a){a&&v(t),d[e].d(),P(s),P(c)}}}function vt(i,t,e){let o;return W(i,z,n=>e(0,o=n)),X(async()=>{const r=(await rt(tt+"/data/update-until-2022/data.tsv")).map(s=>{const g={};for(const[f,c]of Object.entries(s))g[f]=c!=null&&c.trim()?c:"NA";return g});z.set(r),nt.set(3240),at.set(1080)}),[o]}class At extends G{constructor(t){super(),H(this,t,vt,gt,F,{})}}export{At as component};
