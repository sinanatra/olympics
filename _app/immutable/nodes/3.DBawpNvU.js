import{s as Ge,e as m,a as O,t as G,c as p,b as B,l as ge,g as z,f,d as W,m as k,i as $,h,B as ze,C as ue,j as ce,n as qe,D as Ve,E as $e,k as ve,F as Z,r as Se,G as xe,q as et}from"../chunks/scheduler.BRYLh5pv.js";import{S as We,i as Je,b as Ke,d as Xe,m as Ye,t as Ee,c as tt,a as Be,e as Ze,g as lt}from"../chunks/index.jG7-5-V5.js";import{b as st}from"../chunks/paths.BHYW9kA3.js";import{e as Ae,a as oe,b as nt,h as pe,f as rt,d as at,g as De,w as it,i as ot}from"../chunks/constants.2G2OMR97.js";import{e as Y,t as ut,S as ct}from"../chunks/dsv.B8qZ3i3e.js";function Me(t,e,l){const n=t.slice();return n[28]=e[l][0],n[29]=e[l][1],n}function Fe(t,e,l){const n=t.slice();return n[29]=e[l][0],n[32]=e[l][1],n}function Ne(t,e,l){const n=t.slice();return n[35]=e[l],n}function je(t,e,l){const n=t.slice();return n[35]=e[l],n}function He(t){let e,l=t[35]+"",n,c,o,d;function g(){return t[17](t[35])}return{c(){e=m("span"),n=G(l),c=O(),this.h()},l(u){e=p(u,"SPAN",{class:!0});var i=B(e);n=W(i,l),c=z(i),i.forEach(f),this.h()},h(){k(e,"class","svelte-1tdmpuh"),Z(e,"selected",t[35]===t[2].clusterBy)},m(u,i){$(u,e,i),h(e,n),h(e,c),o||(d=ue(e,"click",g),o=!0)},p(u,i){t=u,i[0]&16&&l!==(l=t[35]+"")&&ce(n,l),i[0]&20&&Z(e,"selected",t[35]===t[2].clusterBy)},d(u){u&&f(e),o=!1,d()}}}function Qe(t){let e,l=t[35]+"",n,c,o,d;function g(){return t[18](t[35])}return{c(){e=m("span"),n=G(l),c=O(),this.h()},l(u){e=p(u,"SPAN",{class:!0});var i=B(e);n=W(i,l),c=z(i),i.forEach(f),this.h()},h(){k(e,"class","svelte-1tdmpuh"),Z(e,"selected",t[35]===t[2].moveBy)},m(u,i){$(u,e,i),h(e,n),h(e,c),o||(d=ue(e,"click",g),o=!0)},p(u,i){t=u,i[0]&8&&l!==(l=t[35]+"")&&ce(n,l),i[0]&12&&Z(e,"selected",t[35]===t[2].moveBy)},d(u){u&&f(e),o=!1,d()}}}function Te(t){let e,l=t[29]+"",n,c,o,d;function g(){return t[19](t[29])}return{c(){e=m("span"),n=G(l),c=O(),this.h()},l(u){e=p(u,"SPAN",{style:!0,class:!0});var i=B(e);n=W(i,l),c=z(i),i.forEach(f),this.h()},h(){Se(e,"font-size",t[10](t[32])+"px"),k(e,"class","svelte-1tdmpuh"),Z(e,"highlighted",t[29]===t[2].selectedClusterValue)},m(u,i){$(u,e,i),h(e,n),h(e,c),o||(d=ue(e,"click",g),o=!0)},p(u,i){t=u,i[0]&1&&l!==(l=t[29]+"")&&ce(n,l),i[0]&1&&Se(e,"font-size",t[10](t[32])+"px"),i[0]&5&&Z(e,"highlighted",t[29]===t[2].selectedClusterValue)},d(u){u&&f(e),o=!1,d()}}}function Re(t){let e,l=t[28]+"",n,c,o,d;function g(){return t[21](t[28])}return{c(){e=m("span"),n=G(l),c=O(),this.h()},l(u){e=p(u,"SPAN",{style:!0,class:!0});var i=B(e);n=W(i,l),c=z(i),i.forEach(f),this.h()},h(){Se(e,"font-size",t[9](t[29])+"px"),k(e,"class","svelte-1tdmpuh"),Z(e,"highlighted",t[5].includes(t[28]))},m(u,i){$(u,e,i),h(e,n),h(e,c),o||(d=ue(e,"click",g),o=!0)},p(u,i){t=u,i[0]&2&&l!==(l=t[28]+"")&&ce(n,l),i[0]&2&&Se(e,"font-size",t[9](t[29])+"px"),i[0]&34&&Z(e,"highlighted",t[5].includes(t[28]))},d(u){u&&f(e),o=!1,d()}}}function ht(t){let e,l,n="Reset",c,o,d,g,u="Cluster By:",i,A,v,_,V,te="Move By:",J,C,x,N,Q,he,T=t[2].clusterBy+"",ee,le,de,R,fe,D,K,ye="Filter By:",_e,a,b,y,X,j=t[1].length+"",M,U,H,se,F=Y(t[4]),q=[];for(let r=0;r<F.length;r+=1)q[r]=He(je(t,F,r));let ne=Y(t[3]),S=[];for(let r=0;r<ne.length;r+=1)S[r]=Qe(Ne(t,ne,r));let re=Y(t[0]),w=[];for(let r=0;r<re.length;r+=1)w[r]=Te(Fe(t,re,r));let ae=Y(t[1].slice(0,50).sort(Ue)),L=[];for(let r=0;r<ae.length;r+=1)L[r]=Re(Me(t,ae,r));return{c(){e=m("header"),l=m("button"),l.textContent=n,c=O(),o=m("div"),d=m("div"),g=m("label"),g.textContent=u,i=O(),A=m("div");for(let r=0;r<q.length;r+=1)q[r].c();v=O(),_=m("div"),V=m("label"),V.textContent=te,J=O(),C=m("div");for(let r=0;r<S.length;r+=1)S[r].c();x=O(),N=m("div"),Q=m("label"),he=G("Values for "),ee=G(T),le=G(":"),de=O(),R=m("div");for(let r=0;r<w.length;r+=1)w[r].c();fe=O(),D=m("div"),K=m("label"),K.textContent=ye,_e=O(),a=m("input"),b=O(),y=m("div"),X=G("len: "),M=G(j),U=O();for(let r=0;r<L.length;r+=1)L[r].c();this.h()},l(r){e=p(r,"HEADER",{class:!0});var E=B(e);l=p(E,"BUTTON",{class:!0,"data-svelte-h":!0}),ge(l)!=="svelte-qy1k7w"&&(l.textContent=n),c=z(E),o=p(E,"DIV",{class:!0});var s=B(o);d=p(s,"DIV",{class:!0});var I=B(d);g=p(I,"LABEL",{"data-svelte-h":!0}),ge(g)!=="svelte-1ekr4iz"&&(g.textContent=u),i=z(I),A=p(I,"DIV",{class:!0});var Ie=B(A);for(let P=0;P<q.length;P+=1)q[P].l(Ie);Ie.forEach(f),I.forEach(f),v=z(s),_=p(s,"DIV",{class:!0});var Ce=B(_);V=p(Ce,"LABEL",{"data-svelte-h":!0}),ge(V)!=="svelte-8r6yw"&&(V.textContent=te),J=z(Ce),C=p(Ce,"DIV",{class:!0});var Pe=B(C);for(let P=0;P<S.length;P+=1)S[P].l(Pe);Pe.forEach(f),Ce.forEach(f),x=z(s),N=p(s,"DIV",{class:!0});var be=B(N);Q=p(be,"LABEL",{});var ke=B(Q);he=W(ke,"Values for "),ee=W(ke,T),le=W(ke,":"),ke.forEach(f),de=z(be),R=p(be,"DIV",{class:!0});var Oe=B(R);for(let P=0;P<w.length;P+=1)w[P].l(Oe);Oe.forEach(f),be.forEach(f),fe=z(s),D=p(s,"DIV",{class:!0});var ie=B(D);K=p(ie,"LABEL",{"data-svelte-h":!0}),ge(K)!=="svelte-24ucn1"&&(K.textContent=ye),_e=z(ie),a=p(ie,"INPUT",{type:!0,placeholder:!0,class:!0}),b=z(ie),y=p(ie,"DIV",{class:!0});var me=B(y);X=W(me,"len: "),M=W(me,j),U=z(me);for(let P=0;P<L.length;P+=1)L[P].l(me);me.forEach(f),ie.forEach(f),s.forEach(f),E.forEach(f),this.h()},h(){k(l,"class","reset svelte-1tdmpuh"),k(A,"class","options svelte-1tdmpuh"),k(d,"class","category svelte-1tdmpuh"),k(C,"class","options svelte-1tdmpuh"),k(_,"class","category svelte-1tdmpuh"),k(R,"class","options tiny svelte-1tdmpuh"),k(N,"class","filtered-cluster-values svelte-1tdmpuh"),k(a,"type","text"),k(a,"placeholder","Enter your query"),k(a,"class","svelte-1tdmpuh"),k(y,"class","options tiny svelte-1tdmpuh"),k(D,"class","filtered-entities svelte-1tdmpuh"),k(o,"class","categories svelte-1tdmpuh"),k(e,"class","svelte-1tdmpuh")},m(r,E){$(r,e,E),h(e,l),h(e,c),h(e,o),h(o,d),h(d,g),h(d,i),h(d,A);for(let s=0;s<q.length;s+=1)q[s]&&q[s].m(A,null);h(o,v),h(o,_),h(_,V),h(_,J),h(_,C);for(let s=0;s<S.length;s+=1)S[s]&&S[s].m(C,null);h(o,x),h(o,N),h(N,Q),h(Q,he),h(Q,ee),h(Q,le),h(N,de),h(N,R);for(let s=0;s<w.length;s+=1)w[s]&&w[s].m(R,null);h(o,fe),h(o,D),h(D,K),h(D,_e),h(D,a),ze(a,t[2].queryValue),h(D,b),h(D,y),h(y,X),h(y,M),h(y,U);for(let s=0;s<L.length;s+=1)L[s]&&L[s].m(y,null);H||(se=[ue(l,"click",t[8]),ue(a,"input",t[20])],H=!0)},p(r,E){if(E[0]&84){F=Y(r[4]);let s;for(s=0;s<F.length;s+=1){const I=je(r,F,s);q[s]?q[s].p(I,E):(q[s]=He(I),q[s].c(),q[s].m(A,null))}for(;s<q.length;s+=1)q[s].d(1);q.length=F.length}if(E[0]&76){ne=Y(r[3]);let s;for(s=0;s<ne.length;s+=1){const I=Ne(r,ne,s);S[s]?S[s].p(I,E):(S[s]=Qe(I),S[s].c(),S[s].m(C,null))}for(;s<S.length;s+=1)S[s].d(1);S.length=ne.length}if(E[0]&4&&T!==(T=r[2].clusterBy+"")&&ce(ee,T),E[0]&1157){re=Y(r[0]);let s;for(s=0;s<re.length;s+=1){const I=Fe(r,re,s);w[s]?w[s].p(I,E):(w[s]=Te(I),w[s].c(),w[s].m(R,null))}for(;s<w.length;s+=1)w[s].d(1);w.length=re.length}if(E[0]&4&&a.value!==r[2].queryValue&&ze(a,r[2].queryValue),E[0]&2&&j!==(j=r[1].length+"")&&ce(M,j),E[0]&546){ae=Y(r[1].slice(0,50).sort(Ue));let s;for(s=0;s<ae.length;s+=1){const I=Me(r,ae,s);L[s]?L[s].p(I,E):(L[s]=Re(I),L[s].c(),L[s].m(y,null))}for(;s<L.length;s+=1)L[s].d(1);L.length=ae.length}},i:qe,o:qe,d(r){r&&f(e),Ve(q,r),Ve(S,r),Ve(w,r),Ve(L,r),H=!1,$e(se)}}}const we=12,dt=30,Le=12,ft=30,Ue=([t],[e])=>t.localeCompare(e);function _t(t,e,l){let n,c,o,d,g,u,i,A,v,_,V,te,J,C,x,N;ve(t,Ae,a=>l(15,J=a)),ve(t,oe,a=>l(2,C=a)),ve(t,nt,a=>l(16,x=a)),ve(t,pe,a=>l(5,N=a));const Q=["height","noc","weight","medal"],he=["height","noc","weight","medal"];function T(a,b){le(),pe.set([]),a==="clusterBy"?oe.update(y=>({...y,clusterBy:b})):a==="moveBy"&&oe.update(y=>({...y,moveBy:b}))}function ee(a){oe.update(j=>({...j,selectedClusterValue:a}));const b=C.queryValue.toLowerCase(),y=C.queryCategory,X=[];Object.entries(xe(Ae)).forEach(([j,M])=>{const U=M.dataPoints.some(se=>{var F;return((F=se[C.clusterBy])==null?void 0:F.toString())===a.toString()}),H=M.dataPoints.some(se=>{var F;return(F=se[y])==null?void 0:F.toString().toLowerCase().includes(b)});U&&H&&(X.push(j),M.currentCategoryIndex=0,M.t=0,M.trail=[])}),pe.set(X)}function le(){oe.update(a=>({...a,queryValue:"",selectedClusterValue:null})),pe.set([])}function de(a){return i===A?we:we+(a-i)*(dt-we)/(A-i)}function R(a){return V===te?Le:Le+(a-V)*(ft-Le)/(te-V)}const fe=a=>T("clusterBy",a),D=a=>T("moveBy",a),K=a=>ee(a);function ye(){C.queryValue=this.value,oe.set(C)}const _e=a=>pe.set([a]);return t.$$.update=()=>{t.$$.dirty[0]&65536&&l(12,o=x.map(([a])=>a)),t.$$.dirty[0]&32772&&l(14,d=Object.entries(J).filter(([a,b])=>{const y=C.selectedClusterValue?b.dataPoints.some(U=>{var H;return((H=U[C.clusterBy])==null?void 0:H.toString())===C.selectedClusterValue.toString()}):!0,X=C.queryValue.toLowerCase(),j=C.queryCategory,M=C.queryValue.length>=3?b.dataPoints.some(U=>{var H;return(H=U[j])==null?void 0:H.toString().toLowerCase().includes(X)}):!0;return y&&M}).reduce((a,[b,y])=>(a[b]=y,a),{})),t.$$.dirty[0]&16384&&l(1,g=Object.entries(d).map(([a,b])=>[a,b.dataPoints.length])),t.$$.dirty[0]&2&&l(13,u=g.map(([a,b])=>b)),t.$$.dirty[0]&8192&&(i=u.length>0?Math.min(...u):0),t.$$.dirty[0]&8192&&(A=u.length>0?Math.max(...u):1),t.$$.dirty[0]&36864&&l(0,v=o.map(a=>{const b=Object.values(J).filter(y=>y.categories.includes(a)).length;return[a,b]})),t.$$.dirty[0]&1&&l(11,_=v.map(([a,b])=>b)),t.$$.dirty[0]&2048&&(V=_.length>0?Math.min(..._):0),t.$$.dirty[0]&2048&&(te=_.length>0?Math.max(..._):1)},l(4,n=rt.filter(a=>!Q.includes(a))),l(3,c=at.filter(a=>!he.includes(a))),[v,g,C,c,n,N,T,ee,le,de,R,_,o,u,d,J,x,fe,D,K,ye,_e]}class mt extends We{constructor(e){super(),Je(this,e,_t,ht,Ge,{},null,[-1,-1])}}function pt(t){let e,l="Loading...";return{c(){e=m("p"),e.textContent=l,this.h()},l(n){e=p(n,"P",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-qdsr2u"&&(e.textContent=l),this.h()},h(){k(e,"class","svelte-13tgnqv")},m(n,c){$(n,e,c)},i:qe,o:qe,d(n){n&&f(e)}}}function gt(t){let e,l,n;return l=new ct({}),{c(){e=m("div"),Ke(l.$$.fragment),this.h()},l(c){e=p(c,"DIV",{class:!0});var o=B(e);Xe(l.$$.fragment,o),o.forEach(f),this.h()},h(){k(e,"class","svelte-13tgnqv")},m(c,o){$(c,e,o),Ye(l,e,null),n=!0},i(c){n||(Be(l.$$.fragment,c),n=!0)},o(c){Ee(l.$$.fragment,c),n=!1},d(c){c&&f(e),Ze(l)}}}function vt(t){let e,l,n,c,o,d,g;const u=[gt,pt],i=[];function A(v,_){return v[0].length>0?0:1}return l=A(t),n=i[l]=u[l](t),d=new mt({}),{c(){e=m("main"),n.c(),c=O(),o=m("div"),Ke(d.$$.fragment),this.h()},l(v){e=p(v,"MAIN",{});var _=B(e);n.l(_),c=z(_),o=p(_,"DIV",{class:!0});var V=B(o);Xe(d.$$.fragment,V),V.forEach(f),_.forEach(f),this.h()},h(){k(o,"class","svelte-13tgnqv")},m(v,_){$(v,e,_),i[l].m(e,null),h(e,c),h(e,o),Ye(d,o,null),g=!0},p(v,[_]){let V=l;l=A(v),l!==V&&(lt(),Ee(i[V],1,1,()=>{i[V]=null}),tt(),n=i[l],n||(n=i[l]=u[l](v),n.c()),Be(n,1),n.m(e,c))},i(v){g||(Be(n),Be(d.$$.fragment,v),g=!0)},o(v){Ee(n),Ee(d.$$.fragment,v),g=!1},d(v){v&&f(e),i[l].d(),Ze(d)}}}function yt(t,e,l){let n;return ve(t,De,c=>l(0,n=c)),et(async()=>{const c=await ut(st+"/data/update-until-2022/until2022-all-winter-olympia.tsv");De.set(c),it.set(window.innerWidth),ot.set(window.innerHeight-200)}),[n]}class Bt extends We{constructor(e){super(),Je(this,e,yt,vt,Ge,{})}}export{Bt as component};
