import{s as Oe,e as v,a as D,t as G,c as g,b as w,l as fe,g as N,f as _,d as J,m as y,i as T,h,B as be,C as ae,j as re,n as ve,D as ue,k as ne,E as R,F as He,q as Fe}from"../chunks/scheduler.aNKYHOcM.js";import{S as Ae,i as De,b as Ne,d as $e,m as je,t as de,c as Qe,a as _e,e as Me,g as ze}from"../chunks/index.DU0ByNF3.js";import{a as se,e as Ce,b as Re,h as he,f as Te,d as Ue,g as Ee,w as We,i as Ge}from"../chunks/constants.DULgNhVI.js";import{e as z,t as Je,S as Ke}from"../chunks/dsv.CR_74G7X.js";function Ve(t,e,s){const n=t.slice();return n[17]=e[s],n}function Be(t,e,s){const n=t.slice();return n[20]=e[s],n}function qe(t,e,s){const n=t.slice();return n[23]=e[s],n}function we(t,e,s){const n=t.slice();return n[23]=e[s],n}function Se(t){let e,s=t[23]+"",n,o,u,f;function d(){return t[10](t[23])}return{c(){e=v("span"),n=G(s),o=D(),this.h()},l(i){e=g(i,"SPAN",{class:!0});var r=w(e);n=J(r,s),o=N(r),r.forEach(_),this.h()},h(){y(e,"class","svelte-faut25"),R(e,"selected",t[23]===t[0].clusterBy)},m(i,r){T(i,e,r),h(e,n),h(e,o),u||(f=ae(e,"click",d),u=!0)},p(i,r){t=i,r&16&&s!==(s=t[23]+"")&&re(n,s),r&17&&R(e,"selected",t[23]===t[0].clusterBy)},d(i){i&&_(e),u=!1,f()}}}function Ie(t){let e,s=t[23]+"",n,o,u,f;function d(){return t[11](t[23])}return{c(){e=v("span"),n=G(s),o=D(),this.h()},l(i){e=g(i,"SPAN",{class:!0});var r=w(e);n=J(r,s),o=N(r),r.forEach(_),this.h()},h(){y(e,"class","svelte-faut25"),R(e,"selected",t[23]===t[0].moveBy)},m(i,r){T(i,e,r),h(e,n),h(e,o),u||(f=ae(e,"click",d),u=!0)},p(i,r){t=i,r&8&&s!==(s=t[23]+"")&&re(n,s),r&9&&R(e,"selected",t[23]===t[0].moveBy)},d(i){i&&_(e),u=!1,f()}}}function Le(t){let e,s=t[20]+"",n,o,u,f;function d(){return t[12](t[20])}return{c(){e=v("span"),n=G(s),o=D(),this.h()},l(i){e=g(i,"SPAN",{class:!0});var r=w(e);n=J(r,s),o=N(r),r.forEach(_),this.h()},h(){y(e,"class","svelte-faut25"),R(e,"highlighted",t[20]===t[0].selectedClusterValue)},m(i,r){T(i,e,r),h(e,n),h(e,o),u||(f=ae(e,"click",d),u=!0)},p(i,r){t=i,r&4&&s!==(s=t[20]+"")&&re(n,s),r&5&&R(e,"highlighted",t[20]===t[0].selectedClusterValue)},d(i){i&&_(e),u=!1,f()}}}function Pe(t){let e,s=t[17]+"",n,o,u,f;function d(){return t[14](t[17])}return{c(){e=v("span"),n=G(s),o=D(),this.h()},l(i){e=g(i,"SPAN",{class:!0});var r=w(e);n=J(r,s),o=N(r),r.forEach(_),this.h()},h(){y(e,"class","svelte-faut25"),R(e,"highlighted",t[5].includes(t[17]))},m(i,r){T(i,e,r),h(e,n),h(e,o),u||(f=ae(e,"click",d),u=!0)},p(i,r){t=i,r&2&&s!==(s=t[17]+"")&&re(n,s),r&34&&R(e,"highlighted",t[5].includes(t[17]))},d(i){i&&_(e),u=!1,f()}}}function Xe(t){let e,s,n,o="Cluster By:",u,f,d,i,r,Q="Move By:",m,k,L,j,H,te,U=t[0].clusterBy+"",K,le,c,C,O,S,$,M="Filter By:",F,b,W,A,ge,pe,X=z(t[4]),E=[];for(let a=0;a<X.length;a+=1)E[a]=Se(we(t,X,a));let Y=z(t[3]),V=[];for(let a=0;a<Y.length;a+=1)V[a]=Ie(qe(t,Y,a));let Z=z(t[2]),B=[];for(let a=0;a<Z.length;a+=1)B[a]=Le(Be(t,Z,a));let x=z(Object.keys(t[1]).slice(0,50).sort()),q=[];for(let a=0;a<x.length;a+=1)q[a]=Pe(Ve(t,x,a));return{c(){e=v("header"),s=v("div"),n=v("label"),n.textContent=o,u=D(),f=v("div");for(let a=0;a<E.length;a+=1)E[a].c();d=D(),i=v("div"),r=v("label"),r.textContent=Q,m=D(),k=v("div");for(let a=0;a<V.length;a+=1)V[a].c();L=D(),j=v("div"),H=v("label"),te=G("Values for "),K=G(U),le=G(":"),c=D(),C=v("div");for(let a=0;a<B.length;a+=1)B[a].c();O=D(),S=v("div"),$=v("label"),$.textContent=M,F=D(),b=v("input"),W=D(),A=v("div");for(let a=0;a<q.length;a+=1)q[a].c();this.h()},l(a){e=g(a,"HEADER",{class:!0});var p=w(e);s=g(p,"DIV",{class:!0});var l=w(s);n=g(l,"LABEL",{"data-svelte-h":!0}),fe(n)!=="svelte-1ekr4iz"&&(n.textContent=o),u=N(l),f=g(l,"DIV",{class:!0});var P=w(f);for(let I=0;I<E.length;I+=1)E[I].l(P);P.forEach(_),l.forEach(_),d=N(p),i=g(p,"DIV",{class:!0});var ie=w(i);r=g(ie,"LABEL",{"data-svelte-h":!0}),fe(r)!=="svelte-8r6yw"&&(r.textContent=Q),m=N(ie),k=g(ie,"DIV",{class:!0});var me=w(k);for(let I=0;I<V.length;I+=1)V[I].l(me);me.forEach(_),ie.forEach(_),L=N(p),j=g(p,"DIV",{class:!0});var oe=w(j);H=g(oe,"LABEL",{});var ce=w(H);te=J(ce,"Values for "),K=J(ce,U),le=J(ce,":"),ce.forEach(_),c=N(oe),C=g(oe,"DIV",{class:!0});var ye=w(C);for(let I=0;I<B.length;I+=1)B[I].l(ye);ye.forEach(_),oe.forEach(_),O=N(p),S=g(p,"DIV",{class:!0});var ee=w(S);$=g(ee,"LABEL",{"data-svelte-h":!0}),fe($)!=="svelte-24ucn1"&&($.textContent=M),F=N(ee),b=g(ee,"INPUT",{type:!0,placeholder:!0,class:!0}),W=N(ee),A=g(ee,"DIV",{class:!0});var ke=w(A);for(let I=0;I<q.length;I+=1)q[I].l(ke);ke.forEach(_),ee.forEach(_),p.forEach(_),this.h()},h(){y(f,"class","options svelte-faut25"),y(s,"class","category svelte-faut25"),y(k,"class","options svelte-faut25"),y(i,"class","category svelte-faut25"),y(C,"class","options tiny svelte-faut25"),y(j,"class","filtered-cluster-values svelte-faut25"),y(b,"type","text"),y(b,"placeholder","Enter your query"),y(b,"class","svelte-faut25"),y(A,"class","options tiny svelte-faut25"),y(S,"class","filtered-entities svelte-faut25"),y(e,"class","svelte-faut25")},m(a,p){T(a,e,p),h(e,s),h(s,n),h(s,u),h(s,f);for(let l=0;l<E.length;l+=1)E[l]&&E[l].m(f,null);h(e,d),h(e,i),h(i,r),h(i,m),h(i,k);for(let l=0;l<V.length;l+=1)V[l]&&V[l].m(k,null);h(e,L),h(e,j),h(j,H),h(H,te),h(H,K),h(H,le),h(j,c),h(j,C);for(let l=0;l<B.length;l+=1)B[l]&&B[l].m(C,null);h(e,O),h(e,S),h(S,$),h(S,F),h(S,b),be(b,t[0].queryValue),h(S,W),h(S,A);for(let l=0;l<q.length;l+=1)q[l]&&q[l].m(A,null);ge||(pe=ae(b,"input",t[13]),ge=!0)},p(a,[p]){if(p&81){X=z(a[4]);let l;for(l=0;l<X.length;l+=1){const P=we(a,X,l);E[l]?E[l].p(P,p):(E[l]=Se(P),E[l].c(),E[l].m(f,null))}for(;l<E.length;l+=1)E[l].d(1);E.length=X.length}if(p&73){Y=z(a[3]);let l;for(l=0;l<Y.length;l+=1){const P=qe(a,Y,l);V[l]?V[l].p(P,p):(V[l]=Ie(P),V[l].c(),V[l].m(k,null))}for(;l<V.length;l+=1)V[l].d(1);V.length=Y.length}if(p&1&&U!==(U=a[0].clusterBy+"")&&re(K,U),p&133){Z=z(a[2]);let l;for(l=0;l<Z.length;l+=1){const P=Be(a,Z,l);B[l]?B[l].p(P,p):(B[l]=Le(P),B[l].c(),B[l].m(C,null))}for(;l<B.length;l+=1)B[l].d(1);B.length=Z.length}if(p&1&&b.value!==a[0].queryValue&&be(b,a[0].queryValue),p&34){x=z(Object.keys(a[1]).slice(0,50).sort());let l;for(l=0;l<x.length;l+=1){const P=Ve(a,x,l);q[l]?q[l].p(P,p):(q[l]=Pe(P),q[l].c(),q[l].m(A,null))}for(;l<q.length;l+=1)q[l].d(1);q.length=x.length}},i:ve,o:ve,d(a){a&&_(e),ue(E,a),ue(V,a),ue(B,a),ue(q,a),ge=!1,pe()}}}function Ye(t,e,s){let n,o,u,f,d,i,r,Q;ne(t,se,c=>s(0,d=c)),ne(t,Ce,c=>s(8,i=c)),ne(t,Re,c=>s(9,r=c)),ne(t,he,c=>s(5,Q=c));const m=["height","noc","weight","medal"],k=["height","noc","weight","medal"];function L(c,C){he.set([]),c==="clusterBy"?se.update(O=>({...O,clusterBy:C})):c==="moveBy"&&se.update(O=>({...O,moveBy:C}))}function j(c){se.update($=>({...$,selectedClusterValue:c}));const C=d.queryValue.toLowerCase(),O=d.queryCategory,S=[];Object.entries(He(Ce)).forEach(([$,M])=>{const F=M.dataPoints.some(W=>{var A;return((A=W[d.clusterBy])==null?void 0:A.toString())===c.toString()}),b=M.dataPoints.some(W=>{var A;return(A=W[O])==null?void 0:A.toString().toLowerCase().includes(C)});F&&b&&(S.push($),M.currentCategoryIndex=0,M.t=0,M.trail=[])}),he.set(S)}const H=c=>L("clusterBy",c),te=c=>L("moveBy",c),U=c=>j(c);function K(){d.queryValue=this.value,se.set(d)}const le=c=>he.set([c]);return t.$$.update=()=>{t.$$.dirty&512&&s(2,u=r.map(([c])=>c)),t.$$.dirty&257&&s(1,f=Object.entries(i).filter(([c,C])=>{const O=d.selectedClusterValue?C.dataPoints.some(F=>{var b;return((b=F[d.clusterBy])==null?void 0:b.toString())===d.selectedClusterValue.toString()}):!0,S=d.queryValue.toLowerCase(),$=d.queryCategory,M=d.queryValue.length>=3?C.dataPoints.some(F=>{var b;return(b=F[$])==null?void 0:b.toString().toLowerCase().includes(S)}):!0;return O&&M}).reduce((c,[C,O])=>(c[C]=O,c),{}))},s(4,n=Te.filter(c=>!m.includes(c))),s(3,o=Ue.filter(c=>!k.includes(c))),[d,f,u,o,n,Q,L,j,i,r,H,te,U,K,le]}class Ze extends Ae{constructor(e){super(),De(this,e,Ye,Xe,Oe,{})}}function xe(t){let e,s="Loading...";return{c(){e=v("p"),e.textContent=s,this.h()},l(n){e=g(n,"P",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-qdsr2u"&&(e.textContent=s),this.h()},h(){y(e,"class","svelte-13tgnqv")},m(n,o){T(n,e,o)},i:ve,o:ve,d(n){n&&_(e)}}}function et(t){let e,s,n;return s=new Ke({}),{c(){e=v("div"),Ne(s.$$.fragment),this.h()},l(o){e=g(o,"DIV",{class:!0});var u=w(e);$e(s.$$.fragment,u),u.forEach(_),this.h()},h(){y(e,"class","svelte-13tgnqv")},m(o,u){T(o,e,u),je(s,e,null),n=!0},i(o){n||(_e(s.$$.fragment,o),n=!0)},o(o){de(s.$$.fragment,o),n=!1},d(o){o&&_(e),Me(s)}}}function tt(t){let e,s,n,o,u,f,d;const i=[et,xe],r=[];function Q(m,k){return m[0].length>0?0:1}return s=Q(t),n=r[s]=i[s](t),f=new Ze({}),{c(){e=v("main"),n.c(),o=D(),u=v("div"),Ne(f.$$.fragment),this.h()},l(m){e=g(m,"MAIN",{});var k=w(e);n.l(k),o=N(k),u=g(k,"DIV",{class:!0});var L=w(u);$e(f.$$.fragment,L),L.forEach(_),k.forEach(_),this.h()},h(){y(u,"class","svelte-13tgnqv")},m(m,k){T(m,e,k),r[s].m(e,null),h(e,o),h(e,u),je(f,u,null),d=!0},p(m,[k]){let L=s;s=Q(m),s!==L&&(ze(),de(r[L],1,1,()=>{r[L]=null}),Qe(),n=r[s],n||(n=r[s]=i[s](m),n.c()),_e(n,1),n.m(e,o))},i(m){d||(_e(n),_e(f.$$.fragment,m),d=!0)},o(m){de(n),de(f.$$.fragment,m),d=!1},d(m){m&&_(e),r[s].d(),Me(f)}}}function lt(t,e,s){let n;return ne(t,Ee,o=>s(0,n=o)),Fe(async()=>{const o=await Je("/data/update-until-2022/until2022-all-winter-olympia.tsv");Ee.set(o),We.set(window.innerWidth),Ge.set(window.innerHeight-200)}),[n]}class it extends Ae{constructor(e){super(),De(this,e,lt,tt,Oe,{})}}export{it as component};
