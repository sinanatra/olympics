import{s as Xe,e as g,a as T,t as Y,c as _,b as V,l as ve,g as j,f as d,d as Z,m as k,i as $,h,P as ne,j as _e,n as Le,Q as qe,B as lt,k as be,R as le,r as ge,S as De,q as st}from"../chunks/scheduler.B5e5MwHY.js";import{S as Ye,i as Ze,b as $e,d as xe,m as et,t as we,c as nt,a as Ie,e as tt,g as ot}from"../chunks/index.yVqgE-ux.js";import{b as it}from"../chunks/paths.R8FKUeGe.js";import{h as fe,e as Me,a as de,b as rt,f as at,d as ct,g as Te,w as ut,i as ht}from"../chunks/constants.DYV4Q084.js";import{t as ft,S as dt}from"../chunks/dsv.DLtz8Qcx.js";function te(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function je(t,e,l){const s=t.slice();return s[30]=e[l][0],s[31]=e[l][1],s}function Fe(t,e,l){const s=t.slice();return s[31]=e[l][0],s[34]=e[l][1],s}function Qe(t,e,l){const s=t.slice();return s[37]=e[l],s}function Ue(t,e,l){const s=t.slice();return s[37]=e[l],s}function He(t){let e,l=t[37]+"",s,a,u,f;function m(){return t[20](t[37])}return{c(){e=g("span"),s=Y(l),a=T(),this.h()},l(c){e=_(c,"SPAN",{class:!0});var r=V(e);s=Z(r,l),a=j(r),r.forEach(d),this.h()},h(){k(e,"class","svelte-1cvs0si"),le(e,"selected",t[37]===t[4].clusterBy)},m(c,r){$(c,e,r),h(e,s),h(e,a),u||(f=ne(e,"click",m),u=!0)},p(c,r){t=c,r[0]&64&&l!==(l=t[37]+"")&&_e(s,l),r[0]&80&&le(e,"selected",t[37]===t[4].clusterBy)},d(c){c&&d(e),u=!1,f()}}}function Re(t){let e,l=t[37]+"",s,a,u,f;function m(){return t[21](t[37])}return{c(){e=g("span"),s=Y(l),a=T(),this.h()},l(c){e=_(c,"SPAN",{class:!0});var r=V(e);s=Z(r,l),a=j(r),r.forEach(d),this.h()},h(){k(e,"class","svelte-1cvs0si"),le(e,"selected",t[37]===t[4].moveBy)},m(c,r){$(c,e,r),h(e,s),h(e,a),u||(f=ne(e,"click",m),u=!0)},p(c,r){t=c,r[0]&32&&l!==(l=t[37]+"")&&_e(s,l),r[0]&48&&le(e,"selected",t[37]===t[4].moveBy)},d(c){c&&d(e),u=!1,f()}}}function Je(t){let e,l=t[31]+"",s,a,u,f;function m(){return t[22](t[31])}return{c(){e=g("span"),s=Y(l),a=T(),this.h()},l(c){e=_(c,"SPAN",{style:!0,class:!0});var r=V(e);s=Z(r,l),a=j(r),r.forEach(d),this.h()},h(){ge(e,"font-size",t[13](t[34])+"px"),k(e,"class","svelte-1cvs0si"),le(e,"highlighted",t[31]==t[4].selectedClusterValue)},m(c,r){$(c,e,r),h(e,s),h(e,a),u||(f=ne(e,"click",m),u=!0)},p(c,r){t=c,r[0]&2&&l!==(l=t[31]+"")&&_e(s,l),r[0]&2&&ge(e,"font-size",t[13](t[34])+"px"),r[0]&18&&le(e,"highlighted",t[31]==t[4].selectedClusterValue)},d(c){c&&d(e),u=!1,f()}}}function We(t){let e,l=t[30]+"",s,a,u;function f(){return t[23](t[30])}return{c(){e=g("span"),s=Y(l),this.h()},l(m){e=_(m,"SPAN",{style:!0,class:!0});var c=V(e);s=Z(c,l),c.forEach(d),this.h()},h(){ge(e,"font-size",t[12](t[31])+"px"),k(e,"class","svelte-1cvs0si"),le(e,"highlighted",t[3].includes(t[30]))},m(m,c){$(m,e,c),h(e,s),a||(u=ne(e,"click",f),a=!0)},p(m,c){t=m,c[0]&4&&l!==(l=t[30]+"")&&_e(s,l),c[0]&4&&ge(e,"font-size",t[12](t[31])+"px"),c[0]&12&&le(e,"highlighted",t[3].includes(t[30]))},d(m){m&&d(e),a=!1,u()}}}function Ge(t){let e,l,s=t[2].length+"",a;return{c(){e=g("p"),l=Y("50 out of "),a=Y(s),this.h()},l(u){e=_(u,"P",{style:!0});var f=V(e);l=Z(f,"50 out of "),a=Z(f,s),f.forEach(d),this.h()},h(){ge(e,"border-top","1px solid"),ge(e,"padding-top","10px")},m(u,f){$(u,e,f),h(e,l),h(e,a)},p(u,f){f[0]&4&&s!==(s=u[2].length+"")&&_e(a,s)},d(u){u&&d(e)}}}function vt(t){let e,l,s,a="Reset",u,f,m="Copy Config",c,r,N,y,S="Cluster By:",D,R,se,Q,b,oe="Move By:",J,K,pe,G,W,ie,x=t[4].clusterBy+"",re,me,ye,X,Ce,H,ee,i="Filter By:",v,C,U,B,q,O,A,F=te(t[6]),p=[];for(let o=0;o<F.length;o+=1)p[o]=He(Ue(t,F,o));let ae=te(t[5]),I=[];for(let o=0;o<ae.length;o+=1)I[o]=Re(Qe(t,ae,o));let ce=te(t[1]),L=[];for(let o=0;o<ce.length;o+=1)L[o]=Je(Fe(t,ce,o));let ue=te(t[2].slice(0,50).sort(Ke)),P=[];for(let o=0;o<ue.length;o+=1)P[o]=We(je(t,ue,o));let z=t[2].length>50&&Ge(t);return{c(){e=g("header"),l=g("div"),s=g("button"),s.textContent=a,u=T(),f=g("button"),f.textContent=m,c=T(),r=g("div"),N=g("div"),y=g("label"),y.textContent=S,D=T(),R=g("div");for(let o=0;o<p.length;o+=1)p[o].c();se=T(),Q=g("div"),b=g("label"),b.textContent=oe,J=T(),K=g("div");for(let o=0;o<I.length;o+=1)I[o].c();pe=T(),G=g("div"),W=g("label"),ie=Y("Values for "),re=Y(x),me=Y(":"),ye=T(),X=g("div");for(let o=0;o<L.length;o+=1)L[o].c();Ce=T(),H=g("div"),ee=g("label"),ee.textContent=i,v=T(),C=g("input"),U=T(),B=g("div");for(let o=0;o<P.length;o+=1)P[o].c();q=T(),z&&z.c(),this.h()},l(o){e=_(o,"HEADER",{class:!0});var w=V(e);l=_(w,"DIV",{class:!0});var n=V(l);s=_(n,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(s)!=="svelte-qy1k7w"&&(s.textContent=a),u=j(n),f=_(n,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(f)!=="svelte-18xqo2h"&&(f.textContent=m),n.forEach(d),c=j(w),r=_(w,"DIV",{class:!0});var E=V(r);N=_(E,"DIV",{class:!0});var ke=V(N);y=_(ke,"LABEL",{"data-svelte-h":!0}),ve(y)!=="svelte-1ekr4iz"&&(y.textContent=S),D=j(ke),R=_(ke,"DIV",{class:!0});var Ae=V(R);for(let M=0;M<p.length;M+=1)p[M].l(Ae);Ae.forEach(d),ke.forEach(d),se=j(E),Q=_(E,"DIV",{class:!0});var Ee=V(Q);b=_(Ee,"LABEL",{"data-svelte-h":!0}),ve(b)!=="svelte-8r6yw"&&(b.textContent=oe),J=j(Ee),K=_(Ee,"DIV",{class:!0});var ze=V(K);for(let M=0;M<I.length;M+=1)I[M].l(ze);ze.forEach(d),Ee.forEach(d),pe=j(E),G=_(E,"DIV",{class:!0});var Ve=V(G);W=_(Ve,"LABEL",{});var Be=V(W);ie=Z(Be,"Values for "),re=Z(Be,x),me=Z(Be,":"),Be.forEach(d),ye=j(Ve),X=_(Ve,"DIV",{class:!0});var Ne=V(X);for(let M=0;M<L.length;M+=1)L[M].l(Ne);Ne.forEach(d),Ve.forEach(d),Ce=j(E),H=_(E,"DIV",{class:!0});var he=V(H);ee=_(he,"LABEL",{"data-svelte-h":!0}),ve(ee)!=="svelte-24ucn1"&&(ee.textContent=i),v=j(he),C=_(he,"INPUT",{type:!0,placeholder:!0,class:!0}),U=j(he),B=_(he,"DIV",{class:!0});var Se=V(B);for(let M=0;M<P.length;M+=1)P[M].l(Se);q=j(Se),z&&z.l(Se),Se.forEach(d),he.forEach(d),E.forEach(d),w.forEach(d),this.h()},h(){k(s,"class","reset svelte-1cvs0si"),k(f,"class","copy-config svelte-1cvs0si"),k(l,"class","header-buttons svelte-1cvs0si"),k(R,"class","options svelte-1cvs0si"),k(N,"class","category svelte-1cvs0si"),k(K,"class","options svelte-1cvs0si"),k(Q,"class","category svelte-1cvs0si"),k(X,"class","options tiny svelte-1cvs0si"),k(G,"class","filtered-cluster-values svelte-1cvs0si"),k(C,"type","text"),k(C,"placeholder","Enter your query"),C.value=t[0],k(C,"class","svelte-1cvs0si"),k(B,"class","options tiny svelte-1cvs0si"),k(H,"class","filtered-entities svelte-1cvs0si"),k(r,"class","categories svelte-1cvs0si"),k(e,"class","svelte-1cvs0si")},m(o,w){$(o,e,w),h(e,l),h(l,s),h(l,u),h(l,f),h(e,c),h(e,r),h(r,N),h(N,y),h(N,D),h(N,R);for(let n=0;n<p.length;n+=1)p[n]&&p[n].m(R,null);h(r,se),h(r,Q),h(Q,b),h(Q,J),h(Q,K);for(let n=0;n<I.length;n+=1)I[n]&&I[n].m(K,null);h(r,pe),h(r,G),h(G,W),h(W,ie),h(W,re),h(W,me),h(G,ye),h(G,X);for(let n=0;n<L.length;n+=1)L[n]&&L[n].m(X,null);h(r,Ce),h(r,H),h(H,ee),h(H,v),h(H,C),h(H,U),h(H,B);for(let n=0;n<P.length;n+=1)P[n]&&P[n].m(B,null);h(B,q),z&&z.m(B,null),O||(A=[ne(s,"click",t[10]),ne(f,"click",t[11]),ne(C,"input",t[7])],O=!0)},p(o,w){if(w[0]&336){F=te(o[6]);let n;for(n=0;n<F.length;n+=1){const E=Ue(o,F,n);p[n]?p[n].p(E,w):(p[n]=He(E),p[n].c(),p[n].m(R,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=F.length}if(w[0]&304){ae=te(o[5]);let n;for(n=0;n<ae.length;n+=1){const E=Qe(o,ae,n);I[n]?I[n].p(E,w):(I[n]=Re(E),I[n].c(),I[n].m(K,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=ae.length}if(w[0]&16&&x!==(x=o[4].clusterBy+"")&&_e(re,x),w[0]&8722){ce=te(o[1]);let n;for(n=0;n<ce.length;n+=1){const E=Fe(o,ce,n);L[n]?L[n].p(E,w):(L[n]=Je(E),L[n].c(),L[n].m(X,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=ce.length}if(w[0]&1&&C.value!==o[0]&&(C.value=o[0]),w[0]&4108){ue=te(o[2].slice(0,50).sort(Ke));let n;for(n=0;n<ue.length;n+=1){const E=je(o,ue,n);P[n]?P[n].p(E,w):(P[n]=We(E),P[n].c(),P[n].m(B,q))}for(;n<P.length;n+=1)P[n].d(1);P.length=ue.length}o[2].length>50?z?z.p(o,w):(z=Ge(o),z.c(),z.m(B,null)):z&&(z.d(1),z=null)},i:Le,o:Le,d(o){o&&d(e),qe(p,o),qe(I,o),qe(L,o),qe(P,o),z&&z.d(),O=!1,lt(A)}}}const Pe=12,gt=30,Oe=12,_t=30,Ke=([t],[e])=>t.localeCompare(e);function pt(t,e,l){let s,a,u,f,m,c,r,N,y,S,D,R,se,Q,b,oe;be(t,fe,i=>l(3,se=i)),be(t,Me,i=>l(18,Q=i)),be(t,de,i=>l(4,b=i)),be(t,rt,i=>l(19,oe=i));let J=b.queryValue||"";function K(i){i.target.value.length>3&&(l(0,J=i.target.value),de.update(v=>({...v,queryValue:J})))}const pe=[],G=[];function W(i,v){x(),fe.set([]),i==="clusterBy"?de.update(C=>({...C,clusterBy:v})):i==="moveBy"&&de.update(C=>({...C,moveBy:v}))}function ie(i){de.update(B=>({...B,selectedClusterValue:i}));const v=J.toLowerCase(),C=b.queryCategory||"name",U=[];Object.entries(De(Me)).forEach(([B,q])=>{const O=q.dataPoints.some(F=>{var p;return((p=F[b.clusterBy])==null?void 0:p.toString())===i.toString()}),A=q.dataPoints.some(F=>{var p;return(p=F[C])==null?void 0:p.toString().toLowerCase().includes(v)});O&&A&&(U.push(B),q.currentCategoryIndex=0,q.t=0,q.trail=[])}),fe.set(U)}function x(){de.update(i=>({...i,queryValue:"",selectedClusterValue:null})),l(0,J=""),fe.set([])}function re(){const i={title:"",description:"",methodology:"",config:{clusterBy:b.clusterBy,moveBy:b.moveBy,selectedClusterValue:b.selectedClusterValue||"",queryValue:J,queryCategory:b.queryCategory||"name",speed:b.speed||3,stroke:b.stroke||1,loops:b.loopsToComplete||1,highlightedEntities:De(fe)}},v=JSON.stringify(i,null,4);navigator.clipboard.writeText(v).then(()=>{alert("Config copied to clipboard!")}).catch(C=>{console.error("Could not copy text: ",C)})}function me(i){return r===N?Pe:Pe+(i-r)*(gt-Pe)/(N-r)}function ye(i){return D===R?Oe:Oe+(i-D)*(_t-Oe)/(R-D)}const X=i=>W("clusterBy",i),Ce=i=>W("moveBy",i),H=i=>ie(i),ee=i=>fe.set([i]);return t.$$.update=()=>{t.$$.dirty[0]&524288&&l(15,u=oe.map(([i])=>i)),t.$$.dirty[0]&262161&&l(17,f=Object.entries(Q).filter(([i,v])=>{const C=b.selectedClusterValue?v.dataPoints.some(O=>{var A;return((A=O[b.clusterBy])==null?void 0:A.toString())===b.selectedClusterValue.toString()}):!0,U=J.toLowerCase(),B=b.queryCategory||"name",q=U.length>=3?v.dataPoints.some(O=>{var A;return(A=O[B])==null?void 0:A.toString().toLowerCase().includes(U)}):!0;return C&&q}).reduce((i,[v,C])=>(i[v]=C,i),{})),t.$$.dirty[0]&131072&&l(2,m=Object.entries(f).map(([i,v])=>[i,v.dataPoints.length])),t.$$.dirty[0]&4&&l(16,c=m.map(([i,v])=>v)),t.$$.dirty[0]&65536&&(r=c.length>0?Math.min(...c):0),t.$$.dirty[0]&65536&&(N=c.length>0?Math.max(...c):1),t.$$.dirty[0]&294920&&l(1,y=(()=>{const i=Object.values(Q),v=new Set(se),C=v.size>0;let U=u;const B=[];C&&(U=u.filter(q=>{for(let O=0;O<i.length;O++){const A=i[O];if(v.has(A.moveBy)&&A.categories.includes(q))return!0}return!1}));for(let q=0;q<U.length;q++){const O=U[q];let A=0;for(let F=0;F<i.length;F++){const p=i[F];(!C||v.has(p.moveBy))&&p.categories.includes(O)&&A++}B.push([O,A])}return B})()),t.$$.dirty[0]&2&&l(14,S=y.map(([i,v])=>v)),t.$$.dirty[0]&16384&&(D=S.length>0?Math.min(...S):0),t.$$.dirty[0]&16384&&(R=S.length>0?Math.max(...S):1)},l(6,s=at.filter(i=>!pe.includes(i))),l(5,a=ct.filter(i=>!G.includes(i))),[J,y,m,se,b,a,s,K,W,ie,x,re,me,ye,S,u,c,f,Q,oe,X,Ce,H,ee]}class mt extends Ye{constructor(e){super(),Ze(this,e,pt,vt,Xe,{},null,[-1,-1])}}function yt(t){let e,l="Loading...";return{c(){e=g("p"),e.textContent=l,this.h()},l(s){e=_(s,"P",{class:!0,"data-svelte-h":!0}),ve(e)!=="svelte-qdsr2u"&&(e.textContent=l),this.h()},h(){k(e,"class","svelte-13tgnqv")},m(s,a){$(s,e,a)},i:Le,o:Le,d(s){s&&d(e)}}}function Ct(t){let e,l,s;return l=new dt({}),{c(){e=g("div"),$e(l.$$.fragment),this.h()},l(a){e=_(a,"DIV",{class:!0});var u=V(e);xe(l.$$.fragment,u),u.forEach(d),this.h()},h(){k(e,"class","svelte-13tgnqv")},m(a,u){$(a,e,u),et(l,e,null),s=!0},i(a){s||(Ie(l.$$.fragment,a),s=!0)},o(a){we(l.$$.fragment,a),s=!1},d(a){a&&d(e),tt(l)}}}function bt(t){let e,l,s,a,u,f,m;const c=[Ct,yt],r=[];function N(y,S){return y[0].length>0?0:1}return l=N(t),s=r[l]=c[l](t),f=new mt({}),{c(){e=g("main"),s.c(),a=T(),u=g("div"),$e(f.$$.fragment),this.h()},l(y){e=_(y,"MAIN",{});var S=V(e);s.l(S),a=j(S),u=_(S,"DIV",{class:!0});var D=V(u);xe(f.$$.fragment,D),D.forEach(d),S.forEach(d),this.h()},h(){k(u,"class","svelte-13tgnqv")},m(y,S){$(y,e,S),r[l].m(e,null),h(e,a),h(e,u),et(f,u,null),m=!0},p(y,[S]){let D=l;l=N(y),l!==D&&(ot(),we(r[D],1,1,()=>{r[D]=null}),nt(),s=r[l],s||(s=r[l]=c[l](y),s.c()),Ie(s,1),s.m(e,a))},i(y){m||(Ie(s),Ie(f.$$.fragment,y),m=!0)},o(y){we(s),we(f.$$.fragment,y),m=!1},d(y){y&&d(e),r[l].d(),tt(f)}}}function kt(t,e,l){let s;return be(t,Te,a=>l(0,s=a)),st(async()=>{const a=await ft(it+"/data/update-until-2022/until2022-all-winter-olympia.tsv");Te.set(a),ut.set(window.innerWidth),ht.set(600)}),[s]}class wt extends Ye{constructor(e){super(),Ze(this,e,kt,bt,Xe,{})}}export{wt as component};
