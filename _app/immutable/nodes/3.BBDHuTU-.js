const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/RecordRTC.Bv7qv1Kq.js","../chunks/_commonjsHelpers.Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{s as ce,e as R,t as E,a as N,c as W,b as A,d as H,f as b,g as F,i as J,h as m,u as D,n as V,w as ge,k as ee,y as he,p as le,q as ye,m as Se,o as U,j as be,x as de}from"../chunks/scheduler.C4GZKIzL.js";import{S as ke,i as pe,a as $,c as Me,t as j,g as Ce,b as Q,d as Y,m as Z,f as X}from"../chunks/index.DmHFZWEd.js";import{b as ve}from"../chunks/paths.CShxcjV_.js";import{s as K,g as _e,b as x,a as fe,d as me,w as Re,h as We}from"../chunks/stores.DNmsBm8e.js";import{m as ue,t as Te,S as we}from"../chunks/dsv.Bw-Fm3sl.js";import{C as Ae}from"../chunks/ControlPanel.1GKzp6Pc.js";import{_ as Be}from"../chunks/preload-helper.C1FmrZbK.js";import{c as Pe}from"../chunks/constants.B-I1Kvm2.js";const Ie=async({fetch:i})=>({posts:await(await i("/api/snippets")).json()}),qe=Object.freeze(Object.defineProperty({__proto__:null,load:Ie},Symbol.toStringTag,{value:"Module"}));function Ne(i){let e,n,r,c,l,o,k,t,S,u,M,T,C,y,p,v,g,a;return{c(){e=R("div"),n=R("button"),r=E("Start Manual Recording"),l=N(),o=R("button"),k=E("Stop Manual Recording"),S=N(),u=R("button"),M=E("Start Auto-Recording"),C=N(),y=R("button"),p=E("Start Advanced Auto-Recording"),this.h()},l(d){e=W(d,"DIV",{});var s=A(e);n=W(s,"BUTTON",{});var f=A(n);r=H(f,"Start Manual Recording"),f.forEach(b),l=F(s),o=W(s,"BUTTON",{});var _=A(o);k=H(_,"Stop Manual Recording"),_.forEach(b),S=F(s),u=W(s,"BUTTON",{});var P=A(u);M=H(P,"Start Auto-Recording"),P.forEach(b),C=F(s),y=W(s,"BUTTON",{});var B=A(y);p=H(B,"Start Advanced Auto-Recording"),B.forEach(b),s.forEach(b),this.h()},h(){n.disabled=c=i[0]||i[1]||i[2],o.disabled=t=!i[0]||i[1]||i[2],u.disabled=T=i[1]||i[2],y.disabled=v=i[2]||i[1]},m(d,s){J(d,e,s),m(e,n),m(n,r),m(e,l),m(e,o),m(o,k),m(e,S),m(e,u),m(u,M),m(e,C),m(e,y),m(y,p),g||(a=[D(n,"click",i[3]),D(o,"click",i[4]),D(u,"click",i[5]),D(y,"click",i[6])],g=!0)},p(d,[s]){s&7&&c!==(c=d[0]||d[1]||d[2])&&(n.disabled=c),s&7&&t!==(t=!d[0]||d[1]||d[2])&&(o.disabled=t),s&6&&T!==(T=d[1]||d[2])&&(u.disabled=T),s&6&&v!==(v=d[2]||d[1])&&(y.disabled=v)},i:V,o:V,d(d){d&&b(e),g=!1,ge(a)}}}const Fe=2e4;function Ee(i,e,n){let r;ee(i,K,g=>n(7,r=g));let c,l=!1,o=!1,k=!1,t=0,S;async function u(){const g=he(_e);if(g){const{default:a}=await Be(async()=>{const{default:s}=await import("../chunks/RecordRTC.Bv7qv1Kq.js").then(f=>f.R);return{default:s}},__vite__mapDeps([0,1]),import.meta.url),d=g.captureStream(30);c=new a(d,{type:"video",mimeType:"video/webm",videoBitsPerSecond:1e7}),c.startRecording(),n(0,l=!0),console.log("Recording started")}else console.error("Canvas not found")}async function M(){c&&l?(c.stopRecording(()=>{const g=c.getBlob(),a=document.createElement("a");a.href=URL.createObjectURL(g),a.download="canvas_recording.webm",a.click(),console.log("Recording stopped and saved")}),n(0,l=!1)):console.error("No active recording")}function T(){if(o)return;n(1,o=!0);const g=Object.keys(Pe).filter(a=>a!=="name");console.log("Auto-recording started"),l||u(),setInterval(()=>{if(t>=g.length){console.log("All steps completed. Stopping auto-recording."),C();return}const a=g[t];x.update(d=>({...d,clusterBy:a})),console.log(`Updated clusterBy to: ${a}`),t++},Fe)}async function C(){o&&(clearInterval(S),n(1,o=!1),t=0,await M(),console.log("Auto-recording stopped"))}const y=[{clusterBy:"sport",values:["Alpine Skiing","Alpinism","Biathlon","Bobsleigh","Cross Country Skiing","Curling","Figure Skating","Freestyle Skiing","Ice Hockey","Luge","Military Ski Patrol","Nordic Combined","Roller Skating","Short Track Speed Skating","Skeleton","Ski Jumping","Snowboarding","Speed Skating","Triathlon"]},{clusterBy:"city",values:["Albertville","Beijing","Calgary","Chamonix","Cortina d'Ampezzo","Garmisch-Partenkirchen","Grenoble","Innsbruck","Lake Placid","Lillehammer","Nagano","Oslo","PyeongChang","Salt Lake City","Sankt Moritz","Sapporo","Sarajevo","Sochi","Squaw Valley","Torino","Vancouver"]},{clusterBy:"year",values:["1924","1928","1932","1936","1948","1952","1956","1960","1964","1968","1972","1976","1980","1984","1988","1992","1994","1998","2002","2006","2010","2014","2018","2022"]},{clusterBy:"team",values:["Albania","Algeria","American Samoa","Andorra","Argentina","Armenia","Australia","Austria","Azerbaijan","Belarus","Belgium","Bermuda","Bolivia","Bosnia and Herzegovina","Brazil","British Virgin Islands","Bulgaria","Cameroon","Canada","Cayman Islands","Chile","China","Chinese Taipei","Colombia","Costa Rica","Croatia","Cyprus","Czech Republic","Czechia","Czechoslovakia","Democratic People's Republic of Korea","Denmark","Dominica","East Germany","Ecuador","Egypt","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Georgia","Germany","Ghana","Great Britain","Greece","Guam","Guatemala","Haiti","Honduras","Hong Kong, China","Hong Kong","Hungary","Iceland","Independent Olympic Athletes","India","Individual Olympic Athletes","Iran","Ireland","Islamic Republic of Iran","Israel","Italy","Jamaica","Japan","Kazakhstan","Kenya","Kingdom of Saudi Arabia","Korea Team","Kosovo","Kyrgyzstan","Latvia","Lebanon","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malaysia","Malta","Mexico","Moldova","Monaco","Mongolia","Montenegro","Morocco","Nepal","Netherlands Antilles","Netherlands","New Zealand","Nigeria","North Korea","North Macedonia","Norway","Pakistan","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","ROC","Republic of Korea","Republic of Moldova","Romania","Russia","San Marino","Senegal","Serbia and Montenegro","Serbia","Singapore","Slovakia","Slovenia","South Africa","South Korea","Soviet Union","Spain","Swaziland","Sweden","Switzerland","Tajikistan","Thailand","Timor Leste","Timor","Togo","Tonga","Trinidad and Tobago","Turkey","Ukraine","Unified Team","United States Virgin Islands","United States","Uruguay","Uzbekistan","Venezuela","West Germany","Yugoslavia","Zimbabwe"]},{clusterBy:"weight",values:["32","34","35","36","38","40","41","42","43","44","45","46","47","48","49","49.5","50","51","52","52.5","53","53.5","54","54.5","55","55.5","56","56.5","57","58","59","59.5","60","61","61.5","62","62.5","63","63.5","64","64.5","65","65.5","66","66.5","67","67.5","68","68.5","69","69.5","70","70.5","71","71.5","72","72.5","73","73.5","74","74.5","75","75.5","76","76.5","77","77.5","78","78.5","79","79.5","80","81","81.5","82","82.5","83","83.5","84","84.5","85","86","86.5","87","87.5","88","88.5","89","89.5","90","90.5","91","91.5","92","92.5","93","93.5","94","95","96","97","97.5","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","123","127","130","145"]},{clusterBy:"age",values:["11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","61"]},{clusterBy:"medal",values:["Bronze","Gold","Silver"]},{clusterBy:"event",values:["Alpine Skiing Men's Combined","Alpine Skiing Men's Downhill","Alpine Skiing Men's Giant Slalom","Alpine Skiing Men's Slalom","Alpine Skiing Men's Super G","Alpine Skiing Mixed Team","Alpine Skiing Women's Combined","Alpine Skiing Women's Downhill","Alpine Skiing Women's Giant Slalom","Alpine Skiing Women's Slalom","Alpine Skiing Women's Super G","Alpinism Mixed Alpinism","Biathlon Men's 10 kilometres Sprint","Biathlon Men's 12.5 kilometres Pursuit","Biathlon Men's 15 kilometres Mass Start","Biathlon Men's 20 kilometres","Biathlon Men's 4 x 7.5 kilometres Relay","Biathlon Men's 4 × 7.5 kilometres Relay","Biathlon Mixed 2 x 6 kilometres and 2 x 7.5 kilometres Relay","Biathlon Mixed 2 × 6 kilometres and 2 × 7.5 kilometres Relay","Biathlon Women's 10 kilometres Pursuit","Biathlon Women's 12.5 kilometres Mass Start","Biathlon Women's 15 kilometres","Biathlon Women's 3 x 7.5 kilometres Relay","Biathlon Women's 30 kilometres","Biathlon Women's 4 x 6 kilometres Relay","Biathlon Women's 4 x 7.5 kilometres Relay","Biathlon Women's 4 × 5 kilometres Relay","Biathlon Women's 4 × 6 kilometres Relay","Biathlon Women's 7.5 kilometres Sprint","Biathlon Women's Team Sprint","Bobsleigh Men's Four","Bobsleigh Men's Four/Five","Bobsleigh Men's Two","Bobsleigh Open Four","Bobsleigh Women's Monobob","Bobsleigh Women's Two","Cross Country Skiing Men's 10 kilometres Sprint","Cross Country Skiing Men's 10 kilometres","Cross Country Skiing Men's 10/10 kilometres Pursuit","Cross Country Skiing Men's 10/15 kilometres Pursuit","Cross Country Skiing Men's 12.5 kilometres Pursuit","Cross Country Skiing Men's 15 kilometres","Cross Country Skiing Men's 18 kilometres","Cross Country Skiing Men's 20 kilometres","Cross Country Skiing Men's 30 kilometres Skiathlon","Cross Country Skiing Men's 30 kilometres","Cross Country Skiing Men's 30 km Skiathlon","Cross Country Skiing Men's 4 x 10 kilometres Relay","Cross Country Skiing Men's 4 × 10 kilometres Relay","Cross Country Skiing Men's 4 × 7.5 kilometres Relay","Cross Country Skiing Men's 50 kilometres","Cross Country Skiing Men's Sprint","Cross Country Skiing Men's Team Sprint","Cross Country Skiing Women's 10 kilometres","Cross Country Skiing Women's 15 kilometres Skiathlon","Cross Country Skiing Women's 15 kilometres","Cross Country Skiing Women's 15 km Skiathlon","Cross Country Skiing Women's 20 kilometres","Cross Country Skiing Women's 3 x 5 kilometres Relay","Cross Country Skiing Women's 30 kilometres","Cross Country Skiing Women's 4 x 5 kilometres Relay","Cross Country Skiing Women's 4 × 5 kilometres Relay","Cross Country Skiing Women's 5 kilometres","Cross Country Skiing Women's 5/10 kilometres Pursuit","Cross Country Skiing Women's 5/5 kilometres Pursuit","Cross Country Skiing Women's Sprint","Cross Country Skiing Women's Team Sprint","Curling Men's Curling","Curling Mixed Mixed Doubles","Curling Women's Curling","Figure Skating Men's Singles","Figure Skating Mixed Ice Dancing","Figure Skating Mixed Pairs","Figure Skating Mixed Team","Figure Skating Women's Singles","Freestyle Skiing Men's Aerials","Freestyle Skiing Men's Big Air","Freestyle Skiing Men's Halfpipe","Freestyle Skiing Men's Moguls","Freestyle Skiing Men's Ski Cross","Freestyle Skiing Men's Slopestyle","Freestyle Skiing Mixed Team Aerials","Freestyle Skiing Women's Aerials","Freestyle Skiing Women's Big Air","Freestyle Skiing Women's Halfpipe","Freestyle Skiing Women's Moguls","Freestyle Skiing Women's Ski Cross","Freestyle Skiing Women's Slopestyle","Ice Hockey Men's Ice Hockey","Ice Hockey Women's Ice Hockey","Luge Men's Singles","Luge Mixed (Men)'s Doubles","Luge Mixed Team Relay","Luge Open Doubles","Luge Women's Singles","Military Ski Patrol Men's Military Ski Patrol","Nordic Combined Men's Individual","Nordic Combined Men's Large Hill / 10 km, Individual","Nordic Combined Men's Large Hill, Team","Nordic Combined Men's Normal Hill / 10 km, Individual","Nordic Combined Men's Sprint","Nordic Combined Men's Team","Nordic Combined Mixed's Normal Hill, Team","Roller Skating Boys Combined","Roller Skating Men's 500 metres","Short Track Speed Skating Men's 1,000 metres","Short Track Speed Skating Men's 1,500 metres","Short Track Speed Skating Men's 5,000 metres Relay","Short Track Speed Skating Men's 500 metres","Short Track Speed Skating Mixed 2,000 metres Relay","Short Track Speed Skating Women's 1,000 metres","Short Track Speed Skating Women's 1,500 metres","Short Track Speed Skating Women's 3,000 metres Relay","Short Track Speed Skating Women's 3,000 metres","Short Track Speed Skating Women's 500 metres","Short Track Speed Skating Women's Mass Start","Short Track Speed Skating Women's Team Pursuit (6 laps)","Skeleton Men's Skeleton","Skeleton Women's Skeleton","Ski Jumping Men's Large Hill, Individual","Ski Jumping Men's Large Hill, Team","Ski Jumping Men's Normal Hill, Individual","Ski Jumping Mixed's Normal Hill, Team","Ski Jumping Women's Normal Hill, Individual","Snowboarding Men's Big Air","Snowboarding Men's Boardercross","Snowboarding Men's Cross","Snowboarding Men's Giant Slalom","Snowboarding Men's Halfpipe","Snowboarding Men's Parallel Giant Slalom","Snowboarding Men's Parallel Slalom","Snowboarding Men's Slopestyle","Snowboarding Mixed Team Cross","Snowboarding Women's Big Air","Snowboarding Women's Boardercross","Snowboarding Women's Combined","Snowboarding Women's Cross","Snowboarding Women's Downhill","Snowboarding Women's Giant Slalom","Snowboarding Women's Halfpipe","Snowboarding Women's Parallel Giant Slalom","Snowboarding Women's Parallel Slalom","Snowboarding Women's Slopestyle","Snowboarding Women's Super G","Speed Skating Men's 1,000 metres","Speed Skating Men's 1,500 metres","Speed Skating Men's 10,000 metres","Speed Skating Men's 5,000 metres","Speed Skating Men's 500 metres","Speed Skating Men's Allround","Speed Skating Men's Mass Start","Speed Skating Men's Team Pursuit (8 laps)","Speed Skating Women's 1,000 metres","Speed Skating Women's 1,500 metres","Speed Skating Women's 3,000 metres Relay","Speed Skating Women's 3,000 metres","Speed Skating Women's 5,000 metres","Speed Skating Women's 500 metres","Speed Skating Women's Mass Start","Speed Skating Women's Team Pursuit (6 laps)","Triathlon Girls Sprint","Triathlon Mixed Youth Relay","Triathlon Women's 10 kilometres","Triathlon Women's Sprint"]}];async function p(){if(k)return;n(2,k=!0),console.log("Advanced auto-recording started");async function g(a,d){for(const s of d)console.log(`Processing filter: ${s} for ${a}`),l||await u(),x.update(f=>({...f,queryValue:"",filters:{}})),fe.set([]),x.update(f=>({...f,clusterBy:a,filters:{[a]:[s]},speed:2,stroke:8})),await new Promise(f=>setTimeout(f,500)),await new Promise(f=>{ue.subscribe(_=>{_&&(ue.set(!1),f())})}),console.log(`Completed filter: ${s} for ${a}`)}for(const{clusterBy:a,values:d}of y)if(console.log(`Starting processing for clusterBy: ${a}`),x.update(s=>({...s,clusterBy:a,filters:{}})),await new Promise(s=>setTimeout(s,2e3)),await g(a,d),t++,t>=y.length){console.log("All predefined queries completed.");break}await v()}async function v(){k&&(n(2,k=!1),t=0,await M(),console.log("Advanced auto-recording stopped"))}return i.$$.update=()=>{i.$$.dirty&128&&(r==!0?u():M())},[l,o,k,u,M,T,p,r]}class He extends ke{constructor(e){super(),pe(this,e,Ee,Ne,ce,{})}}function Le(i){let e,n="...";return{c(){e=R("p"),e.textContent=n,this.h()},l(r){e=W(r,"P",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-nvw4vi"&&(e.textContent=n),this.h()},h(){U(e,"class","svelte-wohxbi")},m(r,c){J(r,e,c)},p:V,i:V,o:V,d(r){r&&b(e)}}}function Ge(i){var oe,te;let e,n,r,c,l,o,k,t,S,u,M,T,C,y,p=(((te=(oe=i[0].posts[i[1]])==null?void 0:oe.meta)==null?void 0:te.title)||"No Title")+"",v,g,a,d="",s,f,_,P,B,L,G,q,ne;return r=new we({}),_=new He({}),L=new Ae({}),{c(){e=R("main"),n=R("div"),Q(r.$$.fragment),c=N(),l=R("div"),o=R("button"),k=E("Start Recording Stories"),t=N(),S=R("button"),u=E("Stop Recording Stories"),T=N(),C=R("span"),y=E("Current Story: "),v=E(p),g=N(),a=R("spanp"),a.innerHTML=d,s=N(),f=R("div"),Q(_.$$.fragment),P=N(),B=R("div"),Q(L.$$.fragment),this.h()},l(h){e=W(h,"MAIN",{});var w=A(e);n=W(w,"DIV",{class:!0});var O=A(n);Y(r.$$.fragment,O),O.forEach(b),c=F(w),l=W(w,"DIV",{class:!0});var I=A(l);o=W(I,"BUTTON",{});var ie=A(o);k=H(ie,"Start Recording Stories"),ie.forEach(b),t=F(I),S=W(I,"BUTTON",{});var se=A(S);u=H(se,"Stop Recording Stories"),se.forEach(b),T=F(I),C=W(I,"SPAN",{});var z=A(C);y=H(z,"Current Story: "),v=H(z,p),g=F(z),a=W(z,"SPANP",{"data-svelte-h":!0}),Se(a)!=="svelte-18h7vo"&&(a.innerHTML=d),z.forEach(b),I.forEach(b),s=F(w),f=W(w,"DIV",{class:!0});var ae=A(f);Y(_.$$.fragment,ae),ae.forEach(b),P=F(w),B=W(w,"DIV",{class:!0});var re=A(B);Y(L.$$.fragment,re),re.forEach(b),w.forEach(b),this.h()},h(){U(n,"class","svelte-wohxbi"),o.disabled=i[2],S.disabled=M=!i[2],U(l,"class","svelte-wohxbi"),U(f,"class","svelte-wohxbi"),U(B,"class","svelte-wohxbi")},m(h,w){J(h,e,w),m(e,n),Z(r,n,null),m(e,c),m(e,l),m(l,o),m(o,k),m(l,t),m(l,S),m(S,u),m(l,T),m(l,C),m(C,y),m(C,v),m(C,g),m(C,a),m(e,s),m(e,f),Z(_,f,null),m(e,P),m(e,B),Z(L,B,null),G=!0,q||(ne=[D(o,"click",i[7]),D(S,"click",i[8])],q=!0)},p(h,w){var O,I;(!G||w&4)&&(o.disabled=h[2]),(!G||w&4&&M!==(M=!h[2]))&&(S.disabled=M),(!G||w&3)&&p!==(p=(((I=(O=h[0].posts[h[1]])==null?void 0:O.meta)==null?void 0:I.title)||"No Title")+"")&&be(v,p)},i(h){G||(j(r.$$.fragment,h),j(_.$$.fragment,h),j(L.$$.fragment,h),G=!0)},o(h){$(r.$$.fragment,h),$(_.$$.fragment,h),$(L.$$.fragment,h),G=!1},d(h){h&&b(e),X(r),X(_),X(L),q=!1,ge(ne)}}}function De(i){let e,n,r,c;const l=[Ge,Le],o=[];function k(t,S){return t[3].length>0?0:1}return e=k(i),n=o[e]=l[e](i),{c(){n.c(),r=le()},l(t){n.l(t),r=le()},m(t,S){o[e].m(t,S),J(t,r,S),c=!0},p(t,[S]){let u=e;e=k(t),e===u?o[e].p(t,S):(Ce(),$(o[u],1,1,()=>{o[u]=null}),Me(),n=o[e],n?n.p(t,S):(n=o[e]=l[e](t),n.c()),j(n,1),n.m(r.parentNode,r))},i(t){c||(j(n),c=!0)},o(t){$(n),c=!1},d(t){t&&b(r),o[e].d(t)}}}function Oe(i,e,n){let r,c;ee(i,K,p=>n(10,r=p)),ee(i,me,p=>n(3,c=p));let{data:l}=e,o=-1,k=null,t=!1;ye(async()=>{const v=(await Te(ve+"/data/update-until-2022/data.tsv")).map(g=>{const a={};for(const[d,s]of Object.entries(g))a[d]=s!=null&&s.trim()?s:"NA";return a});me.set(v),Re.set(3240),We.set(1080)});function S(){t||(n(2,t=!0),de(K,r=!0,r),console.log("Manual recording started"))}function u(){t&&(n(2,t=!1),de(K,r=!1,r),console.log("Manual recording stopped"))}function M(){k||(S(),k=setInterval(()=>{var p,v,g,a,d;n(1,o=(o+1)%l.posts.length),x.update(s=>{var f,_,P,B;return{...s,...(_=(f=l.posts[o])==null?void 0:f.meta)==null?void 0:_.config,caption:(B=(P=l.posts[o])==null?void 0:P.meta)==null?void 0:B.caption}}),fe.set(((g=(v=(p=l.posts[o])==null?void 0:p.meta)==null?void 0:v.config)==null?void 0:g.highlightedEntities)||[]),console.log(`Current story: ${(d=(a=l.posts[o])==null?void 0:a.meta)==null?void 0:d.title}`),o===l.posts.length-1&&(T(),u())},6e4))}function T(){k&&(clearInterval(k),k=null)}const C=()=>{M()},y=()=>{T(),u()};return i.$$set=p=>{"data"in p&&n(0,l=p.data)},[l,o,t,c,u,M,T,C,y]}class Qe extends ke{constructor(e){super(),pe(this,e,Oe,De,ce,{data:0})}}export{Qe as component,qe as universal};
