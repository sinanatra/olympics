import{s as Xe,e as v,a as N,t as Y,c as g,b as V,l as de,g as D,f as d,d as Z,m as k,i as $,h,P as ne,j as ge,n as Le,Q as qe,B as lt,k as be,R as se,r as ve,S as De,q as st}from"../chunks/scheduler.B5e5MwHY.js";import{S as Ye,i as Ze,b as $e,d as xe,m as et,t as we,c as nt,a as Ie,e as tt,g as ot}from"../chunks/index.yVqgE-ux.js";import{b as it}from"../chunks/paths.Cz71CWT6.js";import{e as Me,a as he,b as rt,h as fe,f as at,d as ct,g as Fe,w as ut,i as ht}from"../chunks/constants.Bz7_xxji.js";import{t as ft,S as dt}from"../chunks/dsv.B76u23XY.js";function le(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Te(t,e,l){const s=t.slice();return s[30]=e[l][0],s[31]=e[l][1],s}function je(t,e,l){const s=t.slice();return s[31]=e[l][0],s[34]=e[l][1],s}function Qe(t,e,l){const s=t.slice();return s[37]=e[l],s}function He(t,e,l){const s=t.slice();return s[37]=e[l],s}function Re(t){let e,l=t[37]+"",s,a,u,f;function p(){return t[20](t[37])}return{c(){e=v("span"),s=Y(l),a=N(),this.h()},l(c){e=g(c,"SPAN",{class:!0});var i=V(e);s=Z(i,l),a=D(i),i.forEach(d),this.h()},h(){k(e,"class","svelte-1cvs0si"),se(e,"selected",t[37]===t[3].clusterBy)},m(c,i){$(c,e,i),h(e,s),h(e,a),u||(f=ne(e,"click",p),u=!0)},p(c,i){t=c,i[0]&32&&l!==(l=t[37]+"")&&ge(s,l),i[0]&40&&se(e,"selected",t[37]===t[3].clusterBy)},d(c){c&&d(e),u=!1,f()}}}function Ue(t){let e,l=t[37]+"",s,a,u,f;function p(){return t[21](t[37])}return{c(){e=v("span"),s=Y(l),a=N(),this.h()},l(c){e=g(c,"SPAN",{class:!0});var i=V(e);s=Z(i,l),a=D(i),i.forEach(d),this.h()},h(){k(e,"class","svelte-1cvs0si"),se(e,"selected",t[37]===t[3].moveBy)},m(c,i){$(c,e,i),h(e,s),h(e,a),u||(f=ne(e,"click",p),u=!0)},p(c,i){t=c,i[0]&16&&l!==(l=t[37]+"")&&ge(s,l),i[0]&24&&se(e,"selected",t[37]===t[3].moveBy)},d(c){c&&d(e),u=!1,f()}}}function Je(t){let e,l=t[31]+"",s,a,u,f;function p(){return t[22](t[31])}return{c(){e=v("span"),s=Y(l),a=N(),this.h()},l(c){e=g(c,"SPAN",{style:!0,class:!0});var i=V(e);s=Z(i,l),a=D(i),i.forEach(d),this.h()},h(){ve(e,"font-size",t[13](t[34])+"px"),k(e,"class","svelte-1cvs0si"),se(e,"highlighted",t[31]===t[3].selectedClusterValue)},m(c,i){$(c,e,i),h(e,s),h(e,a),u||(f=ne(e,"click",p),u=!0)},p(c,i){t=c,i[0]&2&&l!==(l=t[31]+"")&&ge(s,l),i[0]&2&&ve(e,"font-size",t[13](t[34])+"px"),i[0]&10&&se(e,"highlighted",t[31]===t[3].selectedClusterValue)},d(c){c&&d(e),u=!1,f()}}}function We(t){let e,l=t[30]+"",s,a,u;function f(){return t[23](t[30])}return{c(){e=v("span"),s=Y(l),this.h()},l(p){e=g(p,"SPAN",{style:!0,class:!0});var c=V(e);s=Z(c,l),c.forEach(d),this.h()},h(){ve(e,"font-size",t[12](t[31])+"px"),k(e,"class","svelte-1cvs0si"),se(e,"highlighted",t[6].includes(t[30]))},m(p,c){$(p,e,c),h(e,s),a||(u=ne(e,"click",f),a=!0)},p(p,c){t=p,c[0]&4&&l!==(l=t[30]+"")&&ge(s,l),c[0]&4&&ve(e,"font-size",t[12](t[31])+"px"),c[0]&68&&se(e,"highlighted",t[6].includes(t[30]))},d(p){p&&d(e),a=!1,u()}}}function Ge(t){let e,l,s=t[2].length+"",a;return{c(){e=v("p"),l=Y("50 out of "),a=Y(s),this.h()},l(u){e=g(u,"P",{style:!0});var f=V(e);l=Z(f,"50 out of "),a=Z(f,s),f.forEach(d),this.h()},h(){ve(e,"border-top","1px solid"),ve(e,"padding-top","10px")},m(u,f){$(u,e,f),h(e,l),h(e,a)},p(u,f){f[0]&4&&s!==(s=u[2].length+"")&&ge(a,s)},d(u){u&&d(e)}}}function vt(t){let e,l,s,a="Reset",u,f,p="Copy Config",c,i,O,m,B="Cluster By:",z,T,x,C,H,_e="Move By:",j,W,pe,R,Q,oe,ee=t[3].clusterBy+"",ie,me,Ce,G,ye,M,te,r="Filter By:",_,y,K,L,F,X,U,J=le(t[5]),b=[];for(let o=0;o<J.length;o+=1)b[o]=Re(He(t,J,o));let re=le(t[4]),q=[];for(let o=0;o<re.length;o+=1)q[o]=Ue(Qe(t,re,o));let ae=le(t[1]),w=[];for(let o=0;o<ae.length;o+=1)w[o]=Je(je(t,ae,o));let ce=le(t[2].slice(0,50).sort(Ke)),I=[];for(let o=0;o<ce.length;o+=1)I[o]=We(Te(t,ce,o));let P=t[2].length>50&&Ge(t);return{c(){e=v("header"),l=v("div"),s=v("button"),s.textContent=a,u=N(),f=v("button"),f.textContent=p,c=N(),i=v("div"),O=v("div"),m=v("label"),m.textContent=B,z=N(),T=v("div");for(let o=0;o<b.length;o+=1)b[o].c();x=N(),C=v("div"),H=v("label"),H.textContent=_e,j=N(),W=v("div");for(let o=0;o<q.length;o+=1)q[o].c();pe=N(),R=v("div"),Q=v("label"),oe=Y("Values for "),ie=Y(ee),me=Y(":"),Ce=N(),G=v("div");for(let o=0;o<w.length;o+=1)w[o].c();ye=N(),M=v("div"),te=v("label"),te.textContent=r,_=N(),y=v("input"),K=N(),L=v("div");for(let o=0;o<I.length;o+=1)I[o].c();F=N(),P&&P.c(),this.h()},l(o){e=g(o,"HEADER",{class:!0});var S=V(e);l=g(S,"DIV",{class:!0});var n=V(l);s=g(n,"BUTTON",{class:!0,"data-svelte-h":!0}),de(s)!=="svelte-qy1k7w"&&(s.textContent=a),u=D(n),f=g(n,"BUTTON",{class:!0,"data-svelte-h":!0}),de(f)!=="svelte-18xqo2h"&&(f.textContent=p),n.forEach(d),c=D(S),i=g(S,"DIV",{class:!0});var E=V(i);O=g(E,"DIV",{class:!0});var ke=V(O);m=g(ke,"LABEL",{"data-svelte-h":!0}),de(m)!=="svelte-1ekr4iz"&&(m.textContent=B),z=D(ke),T=g(ke,"DIV",{class:!0});var ze=V(T);for(let A=0;A<b.length;A+=1)b[A].l(ze);ze.forEach(d),ke.forEach(d),x=D(E),C=g(E,"DIV",{class:!0});var Ee=V(C);H=g(Ee,"LABEL",{"data-svelte-h":!0}),de(H)!=="svelte-8r6yw"&&(H.textContent=_e),j=D(Ee),W=g(Ee,"DIV",{class:!0});var Ae=V(W);for(let A=0;A<q.length;A+=1)q[A].l(Ae);Ae.forEach(d),Ee.forEach(d),pe=D(E),R=g(E,"DIV",{class:!0});var Ve=V(R);Q=g(Ve,"LABEL",{});var Be=V(Q);oe=Z(Be,"Values for "),ie=Z(Be,ee),me=Z(Be,":"),Be.forEach(d),Ce=D(Ve),G=g(Ve,"DIV",{class:!0});var Ne=V(G);for(let A=0;A<w.length;A+=1)w[A].l(Ne);Ne.forEach(d),Ve.forEach(d),ye=D(E),M=g(E,"DIV",{class:!0});var ue=V(M);te=g(ue,"LABEL",{"data-svelte-h":!0}),de(te)!=="svelte-24ucn1"&&(te.textContent=r),_=D(ue),y=g(ue,"INPUT",{type:!0,placeholder:!0,class:!0}),K=D(ue),L=g(ue,"DIV",{class:!0});var Se=V(L);for(let A=0;A<I.length;A+=1)I[A].l(Se);F=D(Se),P&&P.l(Se),Se.forEach(d),ue.forEach(d),E.forEach(d),S.forEach(d),this.h()},h(){k(s,"class","reset svelte-1cvs0si"),k(f,"class","copy-config svelte-1cvs0si"),k(l,"class","header-buttons svelte-1cvs0si"),k(T,"class","options svelte-1cvs0si"),k(O,"class","category svelte-1cvs0si"),k(W,"class","options svelte-1cvs0si"),k(C,"class","category svelte-1cvs0si"),k(G,"class","options tiny svelte-1cvs0si"),k(R,"class","filtered-cluster-values svelte-1cvs0si"),k(y,"type","text"),k(y,"placeholder","Enter your query"),y.value=t[0],k(y,"class","svelte-1cvs0si"),k(L,"class","options tiny svelte-1cvs0si"),k(M,"class","filtered-entities svelte-1cvs0si"),k(i,"class","categories svelte-1cvs0si"),k(e,"class","svelte-1cvs0si")},m(o,S){$(o,e,S),h(e,l),h(l,s),h(l,u),h(l,f),h(e,c),h(e,i),h(i,O),h(O,m),h(O,z),h(O,T);for(let n=0;n<b.length;n+=1)b[n]&&b[n].m(T,null);h(i,x),h(i,C),h(C,H),h(C,j),h(C,W);for(let n=0;n<q.length;n+=1)q[n]&&q[n].m(W,null);h(i,pe),h(i,R),h(R,Q),h(Q,oe),h(Q,ie),h(Q,me),h(R,Ce),h(R,G);for(let n=0;n<w.length;n+=1)w[n]&&w[n].m(G,null);h(i,ye),h(i,M),h(M,te),h(M,_),h(M,y),h(M,K),h(M,L);for(let n=0;n<I.length;n+=1)I[n]&&I[n].m(L,null);h(L,F),P&&P.m(L,null),X||(U=[ne(s,"click",t[10]),ne(f,"click",t[11]),ne(y,"input",t[7])],X=!0)},p(o,S){if(S[0]&296){J=le(o[5]);let n;for(n=0;n<J.length;n+=1){const E=He(o,J,n);b[n]?b[n].p(E,S):(b[n]=Re(E),b[n].c(),b[n].m(T,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=J.length}if(S[0]&280){re=le(o[4]);let n;for(n=0;n<re.length;n+=1){const E=Qe(o,re,n);q[n]?q[n].p(E,S):(q[n]=Ue(E),q[n].c(),q[n].m(W,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=re.length}if(S[0]&8&&ee!==(ee=o[3].clusterBy+"")&&ge(ie,ee),S[0]&8714){ae=le(o[1]);let n;for(n=0;n<ae.length;n+=1){const E=je(o,ae,n);w[n]?w[n].p(E,S):(w[n]=Je(E),w[n].c(),w[n].m(G,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=ae.length}if(S[0]&1&&y.value!==o[0]&&(y.value=o[0]),S[0]&4164){ce=le(o[2].slice(0,50).sort(Ke));let n;for(n=0;n<ce.length;n+=1){const E=Te(o,ce,n);I[n]?I[n].p(E,S):(I[n]=We(E),I[n].c(),I[n].m(L,F))}for(;n<I.length;n+=1)I[n].d(1);I.length=ce.length}o[2].length>50?P?P.p(o,S):(P=Ge(o),P.c(),P.m(L,null)):P&&(P.d(1),P=null)},i:Le,o:Le,d(o){o&&d(e),qe(b,o),qe(q,o),qe(w,o),qe(I,o),P&&P.d(),X=!1,lt(U)}}}const Pe=12,gt=30,Oe=12,_t=30,Ke=([t],[e])=>t.localeCompare(e);function pt(t,e,l){let s,a,u,f,p,c,i,O,m,B,z,T,x,C,H,_e;be(t,Me,r=>l(18,x=r)),be(t,he,r=>l(3,C=r)),be(t,rt,r=>l(19,H=r)),be(t,fe,r=>l(6,_e=r));let j=C.queryValue||"";function W(r){r.target.value.length>3&&(l(0,j=r.target.value),he.update(_=>({..._,queryValue:j})))}const pe=["height","noc","weight","medal"],R=["height","noc","weight","medal"];function Q(r,_){ee(),fe.set([]),r==="clusterBy"?he.update(y=>({...y,clusterBy:_})):r==="moveBy"&&he.update(y=>({...y,moveBy:_}))}function oe(r){he.update(L=>({...L,selectedClusterValue:r}));const _=j.toLowerCase(),y=C.queryCategory||"name",K=[];Object.entries(De(Me)).forEach(([L,F])=>{const X=F.dataPoints.some(J=>{var b;return((b=J[C.clusterBy])==null?void 0:b.toString())===r.toString()}),U=_.length>=3?F.dataPoints.some(J=>{var b;return(b=J[y])==null?void 0:b.toString().toLowerCase().includes(_)}):!0;X&&U&&(K.push(L),F.currentCategoryIndex=0,F.t=0,F.trail=[])}),fe.set(K)}function ee(){he.update(r=>({...r,queryValue:"",selectedClusterValue:null})),l(0,j=""),fe.set([])}function ie(){const r={title:"",description:"",methodology:"",config:{clusterBy:C.clusterBy,moveBy:C.moveBy,selectedClusterValue:C.selectedClusterValue||"",queryValue:j,queryCategory:C.queryCategory||"name",speed:C.speed||3,stroke:C.stroke||1,loops:C.loopsToComplete||1,highlightedEntities:De(fe)}},_=JSON.stringify(r,null,4);navigator.clipboard.writeText(_).then(()=>{alert("Config copied to clipboard!")}).catch(y=>{console.error("Could not copy text: ",y)})}function me(r){return i===O?Pe:Pe+(r-i)*(gt-Pe)/(O-i)}function Ce(r){return z===T?Oe:Oe+(r-z)*(_t-Oe)/(T-z)}const G=r=>Q("clusterBy",r),ye=r=>Q("moveBy",r),M=r=>oe(r),te=r=>fe.set([r]);return t.$$.update=()=>{t.$$.dirty[0]&524288&&l(15,u=H.map(([r])=>r)),t.$$.dirty[0]&262153&&l(17,f=Object.entries(x).filter(([r,_])=>{const y=C.selectedClusterValue?_.dataPoints.some(X=>{var U;return((U=X[C.clusterBy])==null?void 0:U.toString())===C.selectedClusterValue.toString()}):!0,K=j.toLowerCase(),L=C.queryCategory||"name",F=K.length>=3?_.dataPoints.some(X=>{var U;return(U=X[L])==null?void 0:U.toString().toLowerCase().includes(K)}):!0;return y&&F}).reduce((r,[_,y])=>(r[_]=y,r),{})),t.$$.dirty[0]&131072&&l(2,p=Object.entries(f).map(([r,_])=>[r,_.dataPoints.length])),t.$$.dirty[0]&4&&l(16,c=p.map(([r,_])=>_)),t.$$.dirty[0]&65536&&(i=c.length>0?Math.min(...c):0),t.$$.dirty[0]&65536&&(O=c.length>0?Math.max(...c):1),t.$$.dirty[0]&294912&&l(1,m=u.map(r=>{const _=Object.values(x).filter(y=>y.categories.includes(r)).length;return[r,_]})),t.$$.dirty[0]&2&&l(14,B=m.map(([r,_])=>_)),t.$$.dirty[0]&16384&&(z=B.length>0?Math.min(...B):0),t.$$.dirty[0]&16384&&(T=B.length>0?Math.max(...B):1)},l(5,s=at.filter(r=>!pe.includes(r))),l(4,a=ct.filter(r=>!R.includes(r))),[j,m,p,C,a,s,_e,W,Q,oe,ee,ie,me,Ce,B,u,c,f,x,H,G,ye,M,te]}class mt extends Ye{constructor(e){super(),Ze(this,e,pt,vt,Xe,{},null,[-1,-1])}}function Ct(t){let e,l="Loading...";return{c(){e=v("p"),e.textContent=l,this.h()},l(s){e=g(s,"P",{class:!0,"data-svelte-h":!0}),de(e)!=="svelte-qdsr2u"&&(e.textContent=l),this.h()},h(){k(e,"class","svelte-13tgnqv")},m(s,a){$(s,e,a)},i:Le,o:Le,d(s){s&&d(e)}}}function yt(t){let e,l,s;return l=new dt({}),{c(){e=v("div"),$e(l.$$.fragment),this.h()},l(a){e=g(a,"DIV",{class:!0});var u=V(e);xe(l.$$.fragment,u),u.forEach(d),this.h()},h(){k(e,"class","svelte-13tgnqv")},m(a,u){$(a,e,u),et(l,e,null),s=!0},i(a){s||(Ie(l.$$.fragment,a),s=!0)},o(a){we(l.$$.fragment,a),s=!1},d(a){a&&d(e),tt(l)}}}function bt(t){let e,l,s,a,u,f,p;const c=[yt,Ct],i=[];function O(m,B){return m[0].length>0?0:1}return l=O(t),s=i[l]=c[l](t),f=new mt({}),{c(){e=v("main"),s.c(),a=N(),u=v("div"),$e(f.$$.fragment),this.h()},l(m){e=g(m,"MAIN",{});var B=V(e);s.l(B),a=D(B),u=g(B,"DIV",{class:!0});var z=V(u);xe(f.$$.fragment,z),z.forEach(d),B.forEach(d),this.h()},h(){k(u,"class","svelte-13tgnqv")},m(m,B){$(m,e,B),i[l].m(e,null),h(e,a),h(e,u),et(f,u,null),p=!0},p(m,[B]){let z=l;l=O(m),l!==z&&(ot(),we(i[z],1,1,()=>{i[z]=null}),nt(),s=i[l],s||(s=i[l]=c[l](m),s.c()),Ie(s,1),s.m(e,a))},i(m){p||(Ie(s),Ie(f.$$.fragment,m),p=!0)},o(m){we(s),we(f.$$.fragment,m),p=!1},d(m){m&&d(e),i[l].d(),tt(f)}}}function kt(t,e,l){let s;return be(t,Fe,a=>l(0,s=a)),st(async()=>{const a=await ft(it+"/data/update-until-2022/until2022-all-winter-olympia.tsv");Fe.set(a),ut.set(window.innerWidth),ht.set(window.innerHeight-200)}),[s]}class wt extends Ye{constructor(e){super(),Ze(this,e,kt,bt,Xe,{})}}export{wt as component};
