const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/RecordRTC.Bv7qv1Kq.js","../chunks/_commonjsHelpers.Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{s as X,e as w,t as D,a as S,c as y,b as A,d as O,f as h,g as E,i as M,h as g,q as I,n as P,u as x,w as G,o as H,k as ee,p as te,l as oe,m as N}from"../chunks/scheduler.3V_Ra38V.js";import{S as Y,i as Z,a as T,c as ne,t as B,g as ae,b as U,d as V,m as j,e as L}from"../chunks/index.CryiHHAf.js";import{b as se}from"../chunks/paths.IT8BA0z6.js";import{g as re,b as q,f as le,d as J,w as ie,h as ce}from"../chunks/stores.IZb_Ax2o.js";import{m as Q,t as de,S as ue}from"../chunks/dsv.CzSYu53c.js";import{C as fe}from"../chunks/ControlPanel.CC2YIqnH.js";import{_ as me}from"../chunks/preload-helper.C1FmrZbK.js";import{c as W}from"../chunks/constants.DQ_K6H8T.js";function pe(l){let e,t,o,s,c,n,d,a,r,u,f,b,$,v,_,p,k,R;return{c(){e=w("div"),t=w("button"),o=D("Start Manual Recording"),c=S(),n=w("button"),d=D("Stop Manual Recording"),r=S(),u=w("button"),f=D("Start Auto-Recording"),$=S(),v=w("button"),_=D("Start Advanced Auto-Recording"),this.h()},l(i){e=y(i,"DIV",{});var m=A(e);t=y(m,"BUTTON",{});var C=A(t);o=O(C,"Start Manual Recording"),C.forEach(h),c=E(m),n=y(m,"BUTTON",{});var F=A(n);d=O(F,"Stop Manual Recording"),F.forEach(h),r=E(m),u=y(m,"BUTTON",{});var K=A(u);f=O(K,"Start Auto-Recording"),K.forEach(h),$=E(m),v=y(m,"BUTTON",{});var z=A(v);_=O(z,"Start Advanced Auto-Recording"),z.forEach(h),m.forEach(h),this.h()},h(){t.disabled=s=l[0]||l[1]||l[2],n.disabled=a=!l[0]||l[1]||l[2],u.disabled=b=l[1]||l[2],v.disabled=p=l[2]||l[1]},m(i,m){M(i,e,m),g(e,t),g(t,o),g(e,c),g(e,n),g(n,d),g(e,r),g(e,u),g(u,f),g(e,$),g(e,v),g(v,_),k||(R=[I(t,"click",l[3]),I(n,"click",l[4]),I(u,"click",l[5]),I(v,"click",l[6])],k=!0)},p(i,[m]){m&7&&s!==(s=i[0]||i[1]||i[2])&&(t.disabled=s),m&7&&a!==(a=!i[0]||i[1]||i[2])&&(n.disabled=a),m&6&&b!==(b=i[1]||i[2])&&(u.disabled=b),m&6&&p!==(p=i[2]||i[1])&&(v.disabled=p)},i:P,o:P,d(i){i&&h(e),k=!1,x(R)}}}const _e=6e4;function ge(l,e,t){let o,s=!1,c=!1,n=!1,d=0,a;async function r(){const _=G(re);if(_){const{default:p}=await me(async()=>{const{default:R}=await import("../chunks/RecordRTC.Bv7qv1Kq.js").then(i=>i.R);return{default:R}},__vite__mapDeps([0,1]),import.meta.url),k=_.captureStream(30);o=new p(k,{type:"video",mimeType:"video/webm",videoBitsPerSecond:15e6}),o.startRecording(),t(0,s=!0),console.log("Recording started")}else console.error("Canvas not found")}async function u(){o&&s?(o.stopRecording(()=>{const _=o.getBlob(),p=document.createElement("a");p.href=URL.createObjectURL(_),p.download="canvas_recording.webm",p.click(),console.log("Recording stopped and saved")}),t(0,s=!1)):console.error("No active recording")}function f(){if(c)return;t(1,c=!0);const _=Object.keys(W).filter(p=>p!=="name");console.log("Auto-recording started"),s||r(),setInterval(()=>{if(d>=_.length){console.log("All steps completed. Stopping auto-recording."),b();return}const p=_[d];q.update(k=>({...k,clusterBy:p})),console.log(`Updated clusterBy to: ${p}`),d++},_e)}async function b(){c&&(clearInterval(a),t(1,c=!1),d=0,await u(),console.log("Auto-recording stopped"))}async function $(){if(n)return;t(2,n=!0);const _=Object.keys(W).filter(R=>R!=="name");let p;console.log("Advanced auto-recording started"),s||await r();async function k(R){p=G(le);for(const i of p)q.update(m=>({...m,clusterBy:R,filters:{[R]:[i[0]]},speed:5})),await new Promise(m=>{Q.subscribe(C=>{C&&(Q.set(!1),m())})})}for(const R of _)if(q.update(i=>({...i,clusterBy:R,filters:{}})),await new Promise(i=>setTimeout(i,2e3)),await k(R),d++,d>=_.length){console.log("All categories and filters completed.");break}await v()}async function v(){n&&(t(2,n=!1),d=0,await u(),console.log("Advanced auto-recording stopped"))}return[s,c,n,r,u,f,$]}class be extends Y{constructor(e){super(),Z(this,e,ge,pe,X,{})}}function ve(l){let e,t="...";return{c(){e=w("p"),e.textContent=t,this.h()},l(o){e=y(o,"P",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-nvw4vi"&&(e.textContent=t),this.h()},h(){N(e,"class","svelte-wohxbi")},m(o,s){M(o,e,s)},i:P,o:P,d(o){o&&h(e)}}}function he(l){let e,t,o,s,c,n,d,a,r,u;return o=new ue({}),n=new be({}),r=new fe({}),{c(){e=w("main"),t=w("div"),U(o.$$.fragment),s=S(),c=w("div"),U(n.$$.fragment),d=S(),a=w("div"),U(r.$$.fragment),this.h()},l(f){e=y(f,"MAIN",{});var b=A(e);t=y(b,"DIV",{class:!0});var $=A(t);V(o.$$.fragment,$),$.forEach(h),s=E(b),c=y(b,"DIV",{class:!0});var v=A(c);V(n.$$.fragment,v),v.forEach(h),d=E(b),a=y(b,"DIV",{class:!0});var _=A(a);V(r.$$.fragment,_),_.forEach(h),b.forEach(h),this.h()},h(){N(t,"class","svelte-wohxbi"),N(c,"class","svelte-wohxbi"),N(a,"class","svelte-wohxbi")},m(f,b){M(f,e,b),g(e,t),j(o,t,null),g(e,s),g(e,c),j(n,c,null),g(e,d),g(e,a),j(r,a,null),u=!0},i(f){u||(B(o.$$.fragment,f),B(n.$$.fragment,f),B(r.$$.fragment,f),u=!0)},o(f){T(o.$$.fragment,f),T(n.$$.fragment,f),T(r.$$.fragment,f),u=!1},d(f){f&&h(e),L(o),L(n),L(r)}}}function Re(l){let e,t,o,s;const c=[he,ve],n=[];function d(a,r){return a[0].length>0?0:1}return e=d(l),t=n[e]=c[e](l),{c(){t.c(),o=H()},l(a){t.l(a),o=H()},m(a,r){n[e].m(a,r),M(a,o,r),s=!0},p(a,[r]){let u=e;e=d(a),e!==u&&(ae(),T(n[u],1,1,()=>{n[u]=null}),ne(),t=n[e],t||(t=n[e]=c[e](a),t.c()),B(t,1),t.m(o.parentNode,o))},i(a){s||(B(t),s=!0)},o(a){T(t),s=!1},d(a){a&&h(o),n[e].d(a)}}}function we(l,e,t){let o;return ee(l,J,s=>t(0,o=s)),te(async()=>{const c=(await de(se+"/data/update-until-2022/data.tsv")).map(n=>{const d={};for(const[a,r]of Object.entries(n))d[a]=r!=null&&r.trim()?r:"NA";return d});J.set(c),ie.set(3240),ce.set(1080)}),[o]}class Ce extends Y{constructor(e){super(),Z(this,e,we,Re,X,{})}}export{Ce as component};
